{"version":3,"file":"index.js","sources":["../src/js/lib/utils/object-to-querystring.js","../src/js/lib/create-rest-client.js","../src/js/api/rest-client.js","../src/js/unitls/send_state_changes.js","../src/js/local_favorites.js","../src/js/api/client.js","../src/js/api/constans.js","../src/js/FlatStateManager.js","../src/js/HashtagManager.js","../src/js/messages.js","../src/js/renders/render_card_workout.js","../src/js/renders/render-exercises-list.js","../src/js/renders/render_favorites_list.js","../src/js/renders/render_card_filter.js","../src/js/renders/render_filter_list.js","../src/js/renders/render_pagination_buttons.js","../src/js/unitls/find_parent_id.js","../src/js/main.js","../src/js/header.js","../src/js/subscribe.js","../src/js/form_rating.js","../src/js/modal.js","../src/js/modal_add_to_favorites.js","../src/js/modal_set_rating.js"],"sourcesContent":["/**\n * Converts object parameters to URL query string\n * @param {Object} [params] - Object containing query parameters\n * @returns {string} Query string starting with '?' or empty string if no parameters\n */\nexport const objectToQueryString = params => {\n  if (!params || typeof params !== 'object') {\n    return '';\n  }\n\n  // Remove keys with undefined values\n  const filteredParams = Object.fromEntries(\n    Object.entries(params).filter(([_, value]) => value !== undefined)\n  );\n\n  if (Object.keys(filteredParams).length === 0) return '';\n\n  const searchParams = new URLSearchParams(filteredParams);\n  return '?' + searchParams.toString();\n};\n","import { objectToQueryString } from './utils';\n\n/**\n * Creates a REST client factory function with predefined base domain\n * @param {string} baseDomain - The base domain URL for all API requests\n * @param handleError\n * @returns {Function} Configured REST client function\n */\nexport const createRestClient = (baseDomain, handleError) => /**\n * Executes REST API request\n * @param url - Request URL path\n * @param {Object} [options] - Request options\n * @param {string} [options.method] - HTTP method\n * @param {Object} [options.query] - Query parameters\n * @param {any} [options.body] - Request body\n * @returns {Promise<{data: any|null, error: Error|null, isError: boolean}>} Response with data or error\n */\n(url, { method = 'GET', query, body }) => new Promise(async (resolve, reject) => {\n  const queryString = objectToQueryString(query);\n\n  const fetchResult = await fetch(`${baseDomain}${url}${queryString}`, {\n    method,\n    body: JSON.stringify(body),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (fetchResult.status >= 500) {\n    reject({\n      status: fetchResult.status,\n      data: null,\n      error: fetchResult.statusText || 'Unknown error',\n      isError: true,\n    });\n    return;\n  }\n\n  let data = null;\n  try {\n    data = await fetchResult.json();\n  } catch (error) {\n    reject({\n      status: 500,\n      data: null,\n      error: 'Parse error',\n      isError: true,\n    });\n  }\n  \n\n  if (fetchResult.status >= 400) {\n    reject({\n      status: fetchResult.status,\n      data: data,\n      error: fetchResult.statusText || 'Unknown error',\n      isError: true,\n    });\n    return;\n  }\n\n  resolve({\n    status: fetchResult.status,\n    data,\n    error: null,\n    isError: false,\n  })\n});","import { createRestClient } from '../lib/create-rest-client'\n\nconst handleError = {\n  400: (error) => {},\n  401: (error) => {},\n  403: (error) => {},\n  404: (error) => {\n    console.log('404 error:', error);\n  },\n  500: (error) => {},\n}\n\nconst makeRequest = createRestClient(import.meta.env.VITE_API_URL, handleError);\n\n/**\n * Executes GET request to REST API\n * @param {string} url - Request URL path (must start with /)\n * @param {Object} [config] - Request configuration\n * @param {Object} [config.query] - Query parameters for URL\n * @returns {Promise<{data: object|null, error: Error|null, isError: boolean}>} Response with data or error\n */\nconst get = async (url, config) => await makeRequest(url, {\n  ...config,\n  method: 'GET',\n  body: undefined,\n})\n\n/**\n * Executes POST request to REST API\n * @param {string} url - Request URL path (must start with /)\n * @param {Object} [config] - Request configuration\n * @param {Object} [config.query] - Query parameters for URL\n * @returns {Promise<{data: object|null, error: Error|null, isError: boolean}>} Response with data or error\n */\nconst post = async (url, config) => await makeRequest(url, {\n  ...config,\n  method: 'POST',\n});\n\n/**\n * Executes PUT request to REST API\n * @param {string} url - Request URL path (must start with /)\n * @param {Object} [config] - Request configuration\n * @param {Object} [config.query] - Query parameters for URL\n * @returns {Promise<{data: object|null, error: Error|null, isError: boolean}>} Response with data or error\n */\nconst put = async (url, config) => await makeRequest(url,{\n  ...config,\n  method: 'PUT',\n});\n\n/**\n * Executes PATCH request to REST API\n * @param {string} url - Request URL path (must start with /)\n * @param {Object} [config] - Request configuration\n * @param {Object} [config.query] - Query parameters for URL\n * @returns {Promise<{data: object|null, error: Error|null, isError: boolean}>} Response with data or error\n */\nconst patch = async (url, config) => await makeRequest(url, {\n  ...config,\n  method: 'PATCH',\n});\n\n/**\n * Executes DELETE request to REST API\n * @param {string} url - Request URL path (must start with /)\n * @param {Object} [config] - Request configuration\n * @param {Object} [config.query] - Query parameters for URL\n * @param {Object} [config.body] - Request body\n * @returns {Promise<{data: object|null, error: Error|null, isError: boolean}>} Response with data or error\n */\nconst del = async (url, config) => await makeRequest(url, {\n  ...config,\n  method: 'DELETE',\n});\n\nexport const api = {\n  get,\n  post,\n  put,\n  patch,\n  del,\n}\n","function sendStateChanges(branch, data) {\n  document.dispatchEvent(new CustomEvent('stateChange', { detail: { branch, data } }));\n}\n\nexport default sendStateChanges;\n","const localStorageKey = 'favorites';\n\nfunction getLocalFavorites() {\n  // Get Favorites from Local Storage\n  const favorites = localStorage.getItem(localStorageKey);\n  if (favorites) {\n    try {\n      return JSON.parse(favorites);\n    } catch (error) {\n      console.error('Error parsing favorites from local storage:', error);\n      return [];\n    }\n  }\n  return [];\n}\n\nfunction setLocalFavorites(list) {\n  // Set Favorites to Local Storage\n  if (!Array.isArray(list)) {\n    console.error('Invalid data type for favorites. Expected an array.');\n    return;\n  }\n\n  // deduplicate the list\n  const uniqueList = Array.from(new Set(list.map(item => item._id))).map(id => list.find(item => item._id === id));\n\n  try {\n    localStorage.setItem(localStorageKey, JSON.stringify(uniqueList));\n  } catch (error) {\n    console.error('Error saving favorites to local storage:', error);\n  }\n}\n\nconst localFavorites = {\n  get: getLocalFavorites,\n  set: setLocalFavorites,\n};\nexport default localFavorites;\n","import { api } from './rest-client';\nimport sendStateChanges from '../unitls/send_state_changes';\nimport localFavorites from '../local_favorites';\n\nconst getFilters = async (group, page = 1, limit = 12) => {\n  // Get Filters for Exercises by Group\n  return api.get(`/filters`, {\n    query: {\n      filter: group,\n      page,\n      limit,\n    },\n  });\n};\n\nconst getQuoteOfDay = async () => {\n  // Get Quote of the Day\n  return api.get('/quote');\n};\n\nconst getExercises = async (query = {}) => {\n  // Get Exercises By Filters\n  return api.get('/exercises', {\n    query: {\n      bodypart: query.bodypart,\n      muscles: query.muscles,\n      equipment: query.equipment,\n      keyword: query.keyword,\n      page: query.page || 1,\n      limit: query.limit || 10,\n    },\n  });\n};\n\nconst addExerciseRating = async (id, query) => {\n  // Add Exercise's Rating\n  return api.patch(`/exercises/${id}/rating`, {\n    body: {\n      rate: query.rate,\n      email: query.email,\n      review: query.review,\n    },\n  });\n};\n\nconst getExerciseById = async id => {\n  // Get Exercise By Id\n  return api.get(`/exercises/${id}`);\n};\n\nconst subscribe = async email => {\n  // Subscribe\n  return api.post('/subscription', {\n    body: { email },\n  });\n};\n\nconst addToFavorites = async id => {\n  // // Add Exercise to Favorites\n  const item = await getExerciseById(id);\n\n  localFavorites.set([...localFavorites.get(), item.data]);\n  const favorites = localFavorites.get();\n  sendStateChanges('favorites', favorites);\n};\n\nconst removeFromFavorites = async id => {\n  // Remove Exercise from Favorites\n  const favorites = localFavorites.get().filter(item => item._id !== id);\n  localFavorites.set(favorites);\n  sendStateChanges('favorites', favorites);\n};\n\nconst isFavorite = async id => {\n  // Check if Exercise is Favorite\n  return localFavorites.get().some(item => item._id === id);\n};\n\nexport default {\n  getFilters,\n  getQuoteOfDay,\n  getExercises,\n  addExerciseRating,\n  getExerciseById,\n  subscribe,\n  addToFavorites,\n  removeFromFavorites,\n  isFavorite,\n};\n","const GROUPS = {\n  BODY_PARTS: 'Body parts',\n  Muscles: 'Muscles',\n  Equipment: 'Equipment',\n};\n\nconst MAP_GROUPS_TO_QUERY_PARAMS = {\n  [GROUPS.BODY_PARTS]: 'bodypart',\n  [GROUPS.Muscles]: 'muscles',\n  [GROUPS.Equipment]: 'equipment',\n};\n\nconst BODYPART = {\n  BACK: 'back',\n  CARDIO: 'cardio',\n  CHEST: 'chest',\n  LOWER_ARMS: 'lower arms',\n  LOWER_LEGS: 'lower legs',\n  NECK: 'neck',\n  SHOULDERS: 'shoulders',\n  UPPER_ARMS: 'upper arms',\n  UPPER_LEGS: 'upper legs',\n  WAIST: 'waist',\n};\n\nconst MUSCLES = {\n  ABDUCTORS: 'abductors',\n  ABS: 'abs',\n  ADDUCTORS: 'adductors',\n  BICEPS: 'biceps',\n  CALVES: 'calves',\n  CARDIOVASCULAR_SYSTEM: 'cardiovascular system',\n  DELTS: 'delts',\n  FOREARMS: 'forearms',\n  GLUTES: 'glutes',\n  HAMSTRINGS: 'hamstrings',\n  LATS: 'lats',\n  LEVATOR_SCAPULAE: 'levator scapulae',\n  PECTORALS: 'pectorals',\n  QUADS: 'quads',\n  SERRATUS_ANTERIOR: 'serratus anterior',\n  SPINE: 'spine',\n  TRAPS: 'traps',\n  TRICEPS: 'triceps',\n  UPPER_BACK: 'upper back',\n};\n\nconst EQUIPMENT = {\n  ASSISTED: 'assisted',\n  BAND: 'band',\n  BARBELL: 'barbell',\n  BODY_WEIGHT: 'body weight',\n  BOSU_BALL: 'bosu ball',\n  CABLE: 'cable',\n  DUMBBELL: 'dumbbell',\n  ELLIPTICAL_MACHINE: 'elliptical machine',\n  EZ_BARBELL: 'ez barbell',\n  HAMMER: 'hammer',\n  KETTLEBELL: 'kettlebell',\n  LEVERAGE_MACHINE: 'leverage machine',\n  MEDICINE_BALL: 'medicine ball',\n  OLYMPIC_BARBELL: 'olympic barbell',\n  RESISTANCE_BAND: 'resistance band',\n  ROLLER: 'roller',\n  ROPE: 'rope',\n  SKIERG_MACHINE: 'skierg machine',\n  SLED_MACHINE: 'sled machine',\n  SMITH_MACHINE: 'smith machine',\n  STABILITY_BALL: 'stability ball',\n  STATIONARY_BIKE: 'stationary bike',\n  STEPMILL_MACHINE: 'stepmill machine',\n  TIRE: 'tire',\n  TRAP_BAR: 'trap bar',\n  UPPER_BODY_ERGOMETER: 'upper body ergometer',\n  WEIGHTED: 'weighted',\n  WHEEL_ROLLER: 'wheel roller',\n};\n\nexport const ExercisesConstants = {\n  GROUPS,\n  MAP_GROUPS_TO_QUERY_PARAMS,\n  BODYPART,\n  MUSCLES,\n  EQUIPMENT,\n};\n","/**\r\n * Manages a flat key-value state object with subscription capabilities.\r\n * Allows subscribing to changes on specific keys and notifies subscribers when values change.\r\n *\r\n * @class FlatStateManager\r\n * @example\r\n * const manager = new FlatStateManager({ count: 0 });\r\n * manager.subscribe('count', (value, state) => console.log(value));\r\n * manager.setState('count', 1); // Logs: 1\r\n */\r\n\r\n\r\nclass FlatStateManager {\r\n    /**\r\n     * @type {Object}\r\n     * Internal state object for managing flat state data.\r\n     */\r\n    #state = {};\r\n  \r\n    /**\r\n     * @type {Object.<string, Function[]>}\r\n     * Stores subscribers for different state keys.\r\n     * Each key maps to an array of subscriber callback functions.\r\n     */\r\n    #subscribers = {};\r\n  \r\n    constructor(initialState = {}) {\r\n      this.#state = { ...initialState };\r\n      this.startListening();\r\n    }\r\n\r\n    startListening() {\r\n      document.addEventListener(\"stateChange\", (event) => {\r\n        const { branch, data } = event.detail;\r\n        console.log(\"Received new state:\", branch, data);\r\n        this.setState(branch, data);\r\n      });\r\n    }\r\n  \r\n    getState(key) {\r\n      return this.#state[key];\r\n    }\r\n  \r\n    /**\r\n     * Updates the state for the specified key if the new value is different from the current value,\r\n     * and notifies subscribers about the change.\r\n     *\r\n     * @param {string} key - The key of the state property to update.\r\n     * @param {*} value - The new value to set for the specified key.\r\n     */\r\n    setState(key, value) {\r\n      if (this.#state[key] !== value) {\r\n        this.#state[key] = value;\r\n        this.notify(key);\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Subscribes a callback function to changes of a specific state key.\r\n     * The callback is immediately invoked with the current value of the key and the entire state.\r\n     *\r\n     * @param {string} key - The key in the state to subscribe to.\r\n     * @param {(value: any, state: Object) => void} callback - The function to call when the state for the given key changes.\r\n     */\r\n    subscribe(key, callback) {\r\n      if (!this.#subscribers[key]) {\r\n        this.#subscribers[key] = [];\r\n      }\r\n      this.#subscribers[key].push(callback);\r\n      // Initial trigger\r\n      callback(this.#state[key], this.#state);\r\n    }\r\n  \r\n    /**\r\n     * Notifies all subscribers of a specific state key by invoking their callbacks.\r\n     *\r\n     * @param {string} key - The key of the state to notify subscribers about.\r\n     */\r\n    notify(key) {\r\n      if (this.#subscribers[key]) {\r\n        for (const callback of this.#subscribers[key]) {\r\n          callback(this.#state[key], this.#state);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  export default FlatStateManager;\r\n\r\n","class HashtagManager {\n  constructor() {\n    this.subscribers = new Map();\n    window.addEventListener('hashchange', this.handleHashChange.bind(this));\n  }\n\n  handleHashChange() {\n    const hash = window.location.hash;\n    this.subscribers.forEach((callback, key) => {\n      callback(hash);\n    });\n  }\n\n  subscribe(key, callback) {\n    if (!this.subscribers.has(key)) {\n      this.subscribers.set(key, callback);\n    }\n    return () => {\n      this.subscribers.delete(key);\n    };\n  }\n\n  isActive(hash) {\n    return window.location.hash === hash;\n  }\n}\n\nexport default HashtagManager;\n","import iziToast from 'izitoast';\n\nconst IziToastSettings = {\n  timeout: 3000,\n  close: false,\n  closeOnClick: true,\n  icon: null,\n  position: 'topRight',\n  transitionIn: 'fadeInDown',\n  transitionOut: 'fadeOutUp',\n};\n\nexport class Messages {\n  static success(message) {\n    iziToast.success({\n      title: 'OK',\n      titleColor: 'green',\n      message: message,\n      messageColor: 'green',\n\n      progressBarColor: 'green',\n      ...IziToastSettings,\n    });\n  }\n  static error(message) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'red',\n      message: message,\n      messageColor: 'red',\n      progressBarColor: 'red',\n      ...IziToastSettings,\n    });\n  }\n  static warning(message) {\n    iziToast.warning({\n      title: 'Caution',\n      message: message,\n      titleColor: 'red',\n      messageColor: 'red',\n      progressBarColor: 'red',\n      ...IziToastSettings,\n    });\n  }\n}\n","// For src/partials/components/workout-card.html\n\nfunction renderCardWorkout(item, asFavorite = false) {\n  const templates = document.querySelector('#templates'); // <template> container\n  const template = templates.content.querySelector('.favorites-workout-card');\n  const newElement = template.cloneNode(true);\n\n  newElement.dataset.id = item._id; // Set data-id attribute\n\n  if (!asFavorite) {\n    newElement.querySelector('.delete').classList.add('hidden'); // Hide delete button for workout cards\n    newElement.querySelector('.rating').textContent = item.rating; // Set rating for favorite workout cards\n  } else {\n    newElement.querySelector('.rating').classList.add('hidden'); // Hide rating for favorite workout cards\n  }\n  // rating\n  newElement.querySelector('.title').textContent = item.name;\n  newElement.querySelector('.burned-calories').textContent = `${item.burnedCalories} / ${item.time} min`;\n  newElement.querySelector('.group').textContent = item._group;\n  newElement.querySelector('.group-target').textContent = item.bodyPart;\n  newElement.querySelector('.filter').textContent = item.target;\n\n  return newElement;\n}\n\nexport default renderCardWorkout;\n","import renderCardWorkout from './render_card_workout';\n\nfunction renderExercisesList(data, selectedFilter) {\n  const list = document.querySelector('.exercises-workout-list');\n  if (!selectedFilter) {\n    list?.classList.add('hidden');\n    return;\n  }\n  list?.classList.remove('hidden');\n  list.innerHTML = '';\n\n  data.forEach(item => {\n    const element = renderCardWorkout(item);\n    list.appendChild(element);\n  });\n}\n\nexport default renderExercisesList;\n","import renderCardWorkout from './render_card_workout';\n\nfunction renderFavoritesList(data) {\n  const wrapper = document.querySelector('.favorites-content-list');\n  const favoritesList = wrapper?.querySelector('.favorites-list');\n  const emptyMessage = wrapper?.querySelector('.favorites-empty-message');\n  favoritesList.innerHTML = '';\n\n  if (data.length === 0) {\n    emptyMessage.classList.remove('hidden');\n    favoritesList.classList.add('hidden');\n    return;\n  }\n\n  emptyMessage.classList.add('hidden');\n  favoritesList.classList.remove('hidden');\n\n  data.forEach(item => {\n    const listItem = renderCardWorkout(item, true); // Assuming renderCardWorkout is defined elsewhere\n    favoritesList.appendChild(listItem);\n  });\n}\n\nexport default renderFavoritesList;\n","// For src/partials/exercises/card-filter.html\n\nfunction renderCardFilter(element, { group, filter, image }) {\n  const templates = document.querySelector('#templates'); // <template> container\n  const template = templates.content.querySelector('.exercises-card-filter');\n\n  let backgroundTemplate = template?.getAttribute('style');\n  backgroundTemplate = backgroundTemplate.replace('{=$image}', `${image}`);\n\n  if (element) {\n    element.setAttribute('style', backgroundTemplate);\n    element.querySelector('h3').textContent = filter;\n    element.querySelector('h3').setAttribute('data-filter', filter);\n    element.querySelector('div').textContent = group;\n    element.querySelector('div').setAttribute('data-group', group);\n  } else {\n    const newElement = template.cloneNode(true);\n    newElement.setAttribute('style', backgroundTemplate);\n    newElement.querySelector('h3').textContent = filter;\n    newElement.querySelector('h3').setAttribute('data-filter', filter);\n    newElement.querySelector('div').textContent = group;\n    newElement.querySelector('div').setAttribute('data-group', group);\n\n    return newElement;\n  }\n}\n\nexport default renderCardFilter;\n","import renderCardFilter from './render_card_filter';\n\n// TODO: Refactoring will be needed\nconst pageSize = 12;\n\nfunction renderFilterList(data, selectedFilter) {\n  const filterList = document.querySelector('.exercises-filters-list');\n  if (selectedFilter) {\n    filterList?.classList.add('hidden');\n    return;\n  }\n  filterList?.classList.remove('hidden');\n\n  data.forEach((item, idx) => {\n    const { filter, imgURL, name } = item;\n    if (filterList.children[idx]) {\n      filterList.children[idx].classList.remove('hidden');\n      renderCardFilter(filterList.children[idx], {\n        filter: name,\n        image: imgURL,\n        group: filter,\n      });\n    }\n  });\n\n  if (data.length < pageSize) {\n    const emptyCount = pageSize - data.length;\n    for (let i = 0; i < emptyCount; i++) {\n      filterList?.children[i + data.length]?.classList.add('hidden');\n    }\n  }\n}\n\nexport default renderFilterList;\n","// For src/partials/components/pagination-buttons.html\n\nfunction renderPaginationButtons(currentPage, totalPages) {\n  const paginationContainer = document.getElementById(\"exercises-list-pagination-buttons\");\n\n  if (!totalPages || totalPages <= 1 || totalPages == \"1\") {\n    paginationContainer?.classList.add('hidden');\n    return;\n  };\n  paginationContainer?.classList.remove('hidden');\n  const arrowButtonsLeft = paginationContainer.querySelector(\n    '.arrow-buttons-left'\n  );\n  const arrowButtonsRight = paginationContainer.querySelector(\n    '.arrow-buttons-right'\n  );\n  const pageButtonsContainer =\n    paginationContainer.querySelector('.page-buttons');\n\n  pageButtonsContainer.innerHTML = ''; // Clear existing buttons\n  for (let i = 1; i <= totalPages; i++) {\n    const button = document.createElement('button');\n    button.dataset.page = i;\n    button.className = 'page-button';\n    button.textContent = i;\n    if (i == currentPage) {\n      button.classList.add('active');\n    }\n    pageButtonsContainer.appendChild(button);\n  }\n}\n\nexport default renderPaginationButtons;\n","function getParentId(element) {\n  if (!element) return null;\n\n  // Traverse up the DOM tree to find the parent with a data-id attribute\n  while (element && !element.dataset.id) {\n    element = element.parentElement;\n  }\n\n  // Return the data-id value if found, otherwise null\n  return element ? element.dataset.id : null;\n}\n\nexport default getParentId;\n","import client from './api/client';\r\nimport { ExercisesConstants } from './api/constans';\r\nimport FlatStateManager from './FlatStateManager';\r\nimport HashtagManager from './HashtagManager';\r\nimport localFavorites from './local_favorites';\r\nimport { Messages } from './messages';\r\nimport renderExercisesList from './renders/render-exercises-list';\r\nimport renderFavoritesList from './renders/render_favorites_list';\r\nimport renderFilterList from './renders/render_filter_list';\r\nimport renderPaginationButtons from './renders/render_pagination_buttons';\r\nimport getParentId from './unitls/find_parent_id';\r\n\r\nconst hashtagManager = new HashtagManager();\r\n\r\nconst store = new FlatStateManager({\r\n  loading: false,\r\n  // Selected group for exercises\r\n  selectedGroup: 'Muscles',\r\n  selectedFilter: null,\r\n\r\n  // Filters\r\n  filtersPage: 1,\r\n  filtersPerPage: 12,\r\n  filtersTotalPages: null,\r\n  filters: [],\r\n\r\n  // Exercises\r\n  exercises: [],\r\n  exercisesPage: 1,\r\n  exercisesPerPage: 10,\r\n  exercisesTotalPages: null,\r\n\r\n  // Favorites\r\n  showFavorites: hashtagManager.isActive('#favorites'),\r\n  favorites: localFavorites.get() || [],\r\n});\r\n\r\nconst mainUnsubscribe = hashtagManager.subscribe('main', hash => {\r\n  console.log('Main hash changed:', hash);\r\n\r\n  const mapActions = {\r\n    '#favorites': () => store.setState('showFavorites', true),\r\n    '': () => store.setState('showFavorites', false),\r\n  };\r\n\r\n  try {\r\n    mapActions[hash]();\r\n  } catch (error) {\r\n    console.error('Not implemented action for hash:', hash);\r\n  }\r\n});\r\n\r\nstore.subscribe('showFavorites', (showFavorites, state) => {\r\n  console.log('Show favorites state changed:', showFavorites);\r\n  const favoritesContent = document.querySelector('#favorites-content');\r\n  const main = document.querySelector('main');\r\n  if (showFavorites) {\r\n    main?.classList.add('hidden');\r\n    favoritesContent.classList.remove('hidden');\r\n    favoritesContent.style.setProperty('--height', `${window.innerHeight}px`);\r\n  } else {\r\n    main?.classList.remove('hidden');\r\n    favoritesContent.classList.add('hidden');\r\n  }\r\n});\r\n\r\nconst exercisesGroupsFilter = document.querySelector('.tabs-controls');\r\n\r\nexercisesGroupsFilter.addEventListener('click', e => {\r\n  if (e.target.dataset.group) {\r\n    exercisesGroupsFilter?.querySelector('.active')?.classList.remove('active');\r\n    e.target.classList.add('active');\r\n    const group = e.target.dataset.group;\r\n    console.log('Selected category:', group);\r\n    store.setState('selectedGroup', group);\r\n    store.setState('selectedFilter', null);\r\n  }\r\n});\r\n\r\nfunction filtersGetDataKey(perPage, page, group) {\r\n  return `${perPage}-${page}-${group}`;\r\n}\r\n\r\nlet filtersUpdating = false;\r\nasync function updateFilters(state) {\r\n  if (filtersUpdating) {\r\n    console.log('Filters are already being updated, skipping this call');\r\n    return;\r\n  }\r\n  filtersUpdating = true;\r\n  const {selectedGroup} = state;\r\n  console.log('Selected category changed:', selectedGroup);\r\n\r\n  const currentKey = filtersGetDataKey(\r\n    state.filtersPerPage,\r\n    state.filtersPage,\r\n    selectedGroup\r\n  );\r\n  const exist = state.filters.find(item => item._key === currentKey);\r\n  if (exist) {\r\n    console.log('Filters already loaded for this group:', selectedGroup, state.filters);\r\n    // No need to fetch again, just update the state for rendering\r\n    store.setState('filters', [...state.filters]);\r\n    store.setState('filtersTotalPages', exist._total);\r\n    filtersUpdating = false;\r\n    return;\r\n  }\r\n\r\n  const response = await client.getFilters(selectedGroup, state.filtersPage);\r\n  console.log('Filters data:', selectedGroup, response, state);\r\n\r\n  if (response.isError) {\r\n    console.error('Error fetching filters:', response.error);\r\n    filtersUpdating = false;\r\n    return;\r\n  }\r\n\r\n  const { results, page, perPage, totalPages } = response.data;\r\n\r\n  store.setState('filters', [\r\n    ...state.filters,\r\n    ...results.map(item => ({\r\n      ...item,\r\n      _key: filtersGetDataKey(perPage, page, selectedGroup),\r\n      _total: totalPages,\r\n    })),\r\n  ]);\r\n  store.setState('filtersPerPage', perPage);\r\n  store.setState('filtersTotalPages', totalPages);\r\n  filtersUpdating = false;\r\n};\r\n\r\nstore.subscribe('selectedGroup', (_, state) => updateFilters(state));\r\nstore.subscribe('filtersPage', (_, state) => updateFilters(state));\r\n\r\n\r\nstore.subscribe('filters', (filters, state) => {\r\n  const { filtersPerPage, filtersPage, selectedGroup } = state;\r\n\r\n  const list = filters.filter(\r\n    item =>\r\n      item._key ===\r\n      filtersGetDataKey(filtersPerPage, filtersPage, selectedGroup)\r\n  );\r\n\r\n  console.log('Filters list:', list);\r\n  renderFilterList(list);\r\n});\r\nstore.subscribe('selectedFilter', (selectedFilter, state) => {\r\n  // If filter is selected, hide the filter list\r\n  if (selectedFilter) {\r\n    renderFilterList(null, selectedFilter);\r\n  }\r\n});\r\n\r\nconst exercisesFiltersList = document.querySelector('.exercises-filters-list');\r\nexercisesFiltersList?.addEventListener('click', e => {\r\n  if (e.target.classList.contains('exercises-card-filter')) {\r\n    const filter = e.target.querySelector(\"[data-filter]\").dataset.filter;\r\n    console.log('Selected filter:', filter);\r\n    store.setState('selectedFilter', filter);\r\n  }\r\n});\r\n\r\nfunction exerciseGetDataKey(perPage, page, group, filter) {\r\n  return `${perPage}-${page}-${group}-${filter}`;\r\n}\r\n\r\nlet exercisesUpdating = false;\r\nasync function updateExercises(state) {\r\n  if (exercisesUpdating) {\r\n    console.log('Exercises are already being updated, skipping this call');\r\n    return;\r\n  }\r\n  exercisesUpdating = true;\r\n  const {selectedFilter} = state;\r\n  if (!selectedFilter) {\r\n    console.log('No filter selected, skipping exercises fetch');\r\n    exercisesUpdating = false;\r\n    return;\r\n  }\r\n\r\n  const currentKey = exerciseGetDataKey(\r\n    state.exercisesPerPage,\r\n    state.exercisesPage,\r\n    state.selectedGroup,\r\n    selectedFilter\r\n  );\r\n  const exist = state.exercises.find(item => item._key === currentKey);\r\n  if (exist) {\r\n    console.log('Exercises already loaded for this filter:', selectedFilter, state.exercises);\r\n    // No need to fetch again, just update the state for rendering\r\n    store.setState('exercises', [...state.exercises]);\r\n    store.setState('exercisesTotalPages', exist._total);\r\n    exercisesUpdating = false;\r\n    return;\r\n  }\r\n\r\n  const paramName =\r\n    ExercisesConstants.MAP_GROUPS_TO_QUERY_PARAMS[state.selectedGroup];\r\n  const query = {\r\n    [paramName]: selectedFilter,\r\n    page: state.exercisesPage,\r\n    limit: state.exercisesPerPage,\r\n  };\r\n\r\n  client.getExercises(query).then(response => {\r\n    if (response.isError) {\r\n      console.error('Error fetching exercises:', response.error);\r\n      return;\r\n    }\r\n    const { results, page, perPage, totalPages } = response.data;\r\n    console.log('Exercises data:', response.data);\r\n    store.setState('exercises', [\r\n      ...state.exercises,\r\n      ...results.map(item => ({\r\n        ...item,\r\n        _group: state.selectedGroup,\r\n        _key: exerciseGetDataKey(perPage, page, state.selectedGroup, selectedFilter),\r\n        _total: totalPages,\r\n      })),\r\n    ]);\r\n    store.setState('exercisesPerPage', perPage);\r\n    store.setState('exercisesTotalPages', totalPages);\r\n    exercisesUpdating = false;\r\n  });\r\n};\r\n\r\nstore.subscribe('selectedFilter', (_, state) => updateExercises(state));\r\nstore.subscribe('exercisesPage', (_, state) => updateExercises(state));\r\n\r\nstore.subscribe('exercises', (exercises, state) => {\r\n  const { exercisesPerPage, exercisesPage, selectedGroup, selectedFilter } = state;\r\n\r\n  const list = exercises.filter(\r\n    item =>\r\n      item._key ===\r\n      exerciseGetDataKey(exercisesPerPage, exercisesPage, selectedGroup, selectedFilter)\r\n  );\r\n\r\n  console.log('Exercises list:', {exercises, list});\r\n  renderExercisesList(list, selectedFilter);\r\n});\r\nstore.subscribe('selectedFilter', (selectedFilter, state) => {\r\n  // If filter is not selected, hide the exercises list\r\n  if (!selectedFilter) {\r\n    renderExercisesList(false, selectedFilter);\r\n  }\r\n});\r\n\r\n// Favorites\r\nstore.subscribe('favorites', (favorites, state) => {\r\n  console.log('Favorites list:', favorites);\r\n  renderFavoritesList(favorites);\r\n});\r\n\r\ndocument.querySelector('.favorites-content-list')?.addEventListener('click', e => {\r\n  if (e.target.classList.contains('delete')) {\r\n    const id = getParentId(e.target);\r\n    client\r\n      .removeFromFavorites(id)\r\n      .then(() => {\r\n        Messages.success('Exercise removed from favorites');\r\n      })\r\n      .catch(error => {\r\n        Messages.error('Failed to remove exercise from favorites');\r\n      });\r\n  }\r\n});\r\n\r\n// Pagination\r\nfunction updatePaginationButtons(state) {\r\n  const { selectedFilter } = state;\r\n  if (!selectedFilter) {\r\n    renderPaginationButtons(state.filtersPage, state.filtersTotalPages);\r\n  } else {\r\n    renderPaginationButtons(state.exercisesPage, state.exercisesTotalPages);\r\n  }\r\n}\r\n\r\nstore.subscribe('filtersTotalPages', (_, state) => updatePaginationButtons(state));\r\nstore.subscribe('filtersPage', (_, state) => updatePaginationButtons(state));\r\nstore.subscribe('exercisesTotalPages', (_, state) => updatePaginationButtons(state));\r\nstore.subscribe('exercisesPage', (_, state) => updatePaginationButtons(state));\r\nstore.subscribe('selectedGroup', (_, state) => updatePaginationButtons(state));\r\nstore.subscribe('selectedFilter', (_, state) => updatePaginationButtons(state));\r\n\r\ndocument.querySelector('.page-buttons')?.addEventListener('click', e => {\r\n  const page = e.target.dataset.page;\r\n  if (page) {\r\n    const selectedFilter = store.getState(\"selectedFilter\");\r\n    if (!selectedFilter) {\r\n      store.setState('filtersPage', Number(page));\r\n    } else {\r\n      store.setState('exercisesPage', Number(page));\r\n    }\r\n  }\r\n});","document.addEventListener('DOMContentLoaded', () => {\n  const burgerBtn = document.getElementById('burgerBtn');\n  const mobileMenu = document.getElementById('burgerMenu');\n  const closeBtn = document.getElementById('close-mob-menu');\n  const socialLinks = document.querySelector('.social-links');\n\n  const homeBtn = document.querySelector('.link-home-btn');\n  const favoritesBtn = document.querySelector('.link-favorites-btn');\n\n  const homeMobileBtn = document.querySelector('.link-home-mobile');\n  const favoritesMobileBtn = document.querySelector('.link-favorites-mobile');\n\n  // --- NAVIGATION STATE FUNCTIONS ---\n  function setActiveNav(activeBtn, inactiveBtn) {\n    activeBtn.classList.add('nav-btn-active');\n    activeBtn.classList.remove('nav-btn-inactive');\n\n    inactiveBtn.classList.add('nav-btn-inactive');\n    inactiveBtn.classList.remove('nav-btn-active');\n  }\n\n  function detectPage() {\n    const isFavoritesPage = document.querySelector('#favorites-content') && !document.querySelector('#favorites-content').classList.contains('hidden');\n\n    if (isFavoritesPage) {\n      setActiveNav(favoritesBtn, homeBtn);\n      setActiveNav(favoritesMobileBtn, homeMobileBtn);\n    } else {\n      setActiveNav(homeBtn, favoritesBtn);\n      setActiveNav(homeMobileBtn, favoritesMobileBtn);\n    }\n  }\n\n  // --- NAVIGATION EVENTS ---\n  function handleNavClick(isFavorites = false) {\n    const content = document.getElementById('favorites-content');\n    if (!content) return;\n\n    content.classList.toggle('hidden', !isFavorites);\n    mobileMenu.classList.remove('open');\n    detectPage();\n  }\n\n  homeBtn.addEventListener('click', () => handleNavClick(false));\n  favoritesBtn.addEventListener('click', () => handleNavClick(true));\n\n  homeMobileBtn.addEventListener('click', () => handleNavClick(false));\n  favoritesMobileBtn.addEventListener('click', () => handleNavClick(true));\n\n  // --- BURGER MENU ---\n  burgerBtn.addEventListener('click', () => {\n    mobileMenu.classList.add('open');\n  });\n\n  closeBtn.addEventListener('click', () => {\n    mobileMenu.classList.remove('open');\n  });\n\n  window.addEventListener('click', e => {\n    if (!mobileMenu.contains(e.target) && !burgerBtn.contains(e.target)) {\n      mobileMenu.classList.remove('open');\n    }\n  });\n\n  // --- SOCIAL ICON VISIBILITY ---\n  const updateSocialLinksVisibility = () => {\n    if (window.innerWidth <= 768) {\n      socialLinks.style.display = 'none';\n    } else {\n      socialLinks.style.display = '';\n    }\n  };\n\n  // --- REMOVE FOCUS AFTER CLICK ---\n  document.querySelectorAll('.link-icon').forEach(icon => {\n    icon.addEventListener('click', () => {\n      icon.blur();\n    });\n  });\n\n  updateSocialLinksVisibility();\n  window.addEventListener('resize', () => {\n    updateSocialLinksVisibility();\n    detectPage();\n  });\n\n  window.addEventListener('hashchange', detectPage);\n  detectPage();\n});\n\n\n\n","import client from './api/client.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { Messages } from './messages.js';\n\nconst form = document.getElementById('subscribeForm');\nconst emailInput = form.querySelector('input[name=\"email\"]');\nconst subscribeBtn = document.getElementById('subscribeBtn');\n\nemailInput.addEventListener('input', handleEmailValidation);\nform.addEventListener('submit', subscribe);\n\nfunction isValidEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\nfunction handleEmailValidation() {\n  const emailValue = emailInput.value;\n  const isValid = isValidEmail(emailValue);\n\n  emailInput.style.borderColor = isValid ? 'green' : 'red';\n}\n\nasync function subscribe(e) {\n  e.preventDefault();\n  const formData = new FormData(form);\n\n  const emailValue = formData.get('email');\n  const isValid = isValidEmail(emailValue);\n  if (!isValid) {\n    console.error('Invalid email address');\n    return Messages.error('Invalid email address');\n  }\n\n  subscribeBtn.disabled = true;\n  client\n    .subscribe(emailValue)\n    .then(response => {\n      form.reset();\n      emailInput.style.borderColor = '';\n      Messages.success(`${response.data.message}`);\n    })\n    .catch(error => {\n      return Messages.error(error?.data?.message || 'Subscription failed');\n    })\n    .finally(() => {\n      subscribeBtn.disabled = false;\n    });\n}\n","import { Messages } from './messages.js';\n\nfunction initModalRating(id) {\n  const modal = document.getElementById('modal-rating');\n  modal.style.display = 'flex';\n  const modalForm = document.getElementById('subscribe-details-form');\n  const modalCloseBtn = document.getElementById('modal-close');\n\n  const ratingValue = document.getElementById('rating-value');\n  const ratingStars = document.getElementById('rating-stars');\n\n  let selectedRating = 0;\n\n  ratingStars?.addEventListener('click', e => {\n    const rect = ratingStars.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const percent = x / rect.width;\n    selectedRating = Math.round(percent * 5);\n\n    ratingValue.textContent = selectedRating.toFixed(1);\n    highlightStars(selectedRating);\n  });\n\n  if (ratingStars && ratingValue) {\n    ratingStars.addEventListener('mousemove', e => {\n      const rect = ratingStars.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percent = x / rect.width;\n      const rating = Math.round(percent * 5 * 10) / 10;\n      ratingValue.textContent = rating.toFixed(1);\n      highlightStars(rating);\n    });\n\n    ratingStars.addEventListener('mouseleave', () => {\n      ratingValue.textContent = selectedRating.toFixed(1);\n      highlightStars(selectedRating);\n    });\n\n    ratingStars.addEventListener('click', e => {\n      const rect = ratingStars.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percent = x / rect.width;\n      selectedRating = Math.round(percent * 5 * 10) / 10;\n\n      ratingValue.textContent = selectedRating.toFixed(1);\n      highlightStars(selectedRating);\n    });\n  }\n\n  function highlightStars(value) {\n    const starIcons = ratingStars.querySelectorAll('.star-icon');\n    starIcons.forEach((star, index) => {\n      if (index < Math.round(value)) {\n        star.classList.add('active');\n      } else {\n        star.classList.remove('active');\n      }\n    });\n  }\n\n  // Close the modal window\n  modalCloseBtn.addEventListener('click', () => {\n    modal.style.display = 'none';\n    selectedRating = 0;\n    ratingValue.textContent = '0.0';\n    highlightStars(0);\n  });\n\n  // Submit the form\n  modalForm.addEventListener('submit', async e => {\n    e.preventDefault();\n    //const exerciseID = 'your-exercise-id'; // â† replacement with the actual one\n    const exerciseID = '64f389465ae26083f39b17a2'; // hacked for the test\n\n    const emailInput = modalForm.elements['email'];\n    const commentInput = modalForm.elements['comment'];\n    const email = emailInput.value.trim();\n    const review = commentInput.value.trim();\n\n    const rate = selectedRating;\n\n    if (!emailInput.checkValidity()) {\n      Messages.error('Please enter a valid email address.');\n      return;\n    }\n\n    try {\n      const response = await fetch(`https://your-energy.b.goit.study/api/exercises/${exerciseID}/rating`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ rate, email, review }),\n      });\n\n      if (response.status === 409) {\n        Messages.warning('You have already submitted a review for this exercise.');\n        return;\n      } else if (!response.ok) {\n        const error = await response.json();\n        Messages.error(`Error ${response.status}: ${error.message || 'Unknown error'}`);\n        return;\n      } else {\n        Messages.success('Your feedback has been submitted successfully!');\n        modalForm.reset();\n        modal.style.display = 'none';\n        selectedRating = 0;\n        ratingValue.textContent = '0.0';\n        highlightStars(0);\n      }\n    } catch (err) {\n      Messages.error('Something went wrong. Please try again later.');\n    }\n  });\n}\n\nexport default initModalRating;\n","import client from './api/client';\nimport initModalRating from './form_rating';\nimport { Messages } from './messages';\n\nasync function toggleFavorite(id) {\n  const isFavorite = await client.isFavorite(id);\n\n  if (isFavorite) {\n    client\n      .removeFromFavorites(id)\n      .then(() => {\n        Messages.success('Exercise removed from favorites');\n      })\n      .catch(error => {\n        console.error('Error adding exercise to favorites:', error);\n        Messages.error('Failed to remove exercise from favorites');\n      });\n  } else {\n    client\n      .addToFavorites(id)\n      .then(() => {\n        Messages.success('Exercise added to favorites');\n      })\n      .catch(error => {\n        console.error('Error adding exercise to favorites:', error);\n        Messages.error('Failed to add exercise to favorites');\n      });\n  }\n}\n\nfunction capitalizeFirstLetter(string) {\n  if (typeof string === 'string') {\n    return `${string.charAt(0).toUpperCase()}${string.slice(1)}`;\n  } else {\n    return string;\n  }\n}\n\nexport async function openDetailsModal(id) {\n  const data = (await client.getExerciseById(id))?.data;\n  const isFavorite = await client.isFavorite(id);\n\n  document.querySelector('.modal-title').textContent = capitalizeFirstLetter(data.name);\n  if (isFavorite) {\n    document.querySelector('.icon-favorite')?.classList.add('active');\n  } else {\n    document.querySelector('.icon-favorite')?.classList.remove('active');\n  }\n\n  document.querySelector('.modal-rate-value').textContent = data.rating;\n\n  const infoElements = document.querySelectorAll('.exercise-info-text');\n  const infoData = [data.target, data.bodyPart, data.equipment, data.popularity, data.burnedCalories];\n  infoElements.forEach((el, idx) => (el.textContent = capitalizeFirstLetter(infoData[idx])));\n\n  document.querySelector('.modal-img').setAttribute('src', data.gifUrl);\n  document.querySelector('.modal-description').textContent = data.description;\n  document.querySelector('.btn-favorite').onclick = () => {\n    toggleFavorite(id);\n    document.querySelector('.icon-favorite')?.classList.toggle('active');\n  };\n  document.querySelector('.btn-rating').onclick = () => {\n    closeDetailsModal();\n    initModalRating(id);\n  };\n\n  document.querySelector('.backdrop').classList.add('is-open');\n\n  document.body.classList.add('modal-open');\n\n  const arrStar = document.querySelectorAll('.star-rating-icon');\n  for (let i = 0; i < Math.round(data.rating); ++i) {\n    arrStar[i].style.fill = '#eea10c';\n  }\n}\n\nexport function closeDetailsModal() {\n  document.querySelector('.backdrop').classList.remove('is-open');\n  document.body.classList.remove('modal-open');\n}\n\ndocument.querySelector('.modal-close-btn').addEventListener('click', closeDetailsModal);\ndocument.querySelector('.backdrop').addEventListener('click', e => {\n  if (e.target === e.currentTarget) closeDetailsModal();\n});\n","import { openDetailsModal } from './modal';\nimport getParentId from './unitls/find_parent_id';\n\nconst container = document.querySelector('.exercises-workout-list');\n\ncontainer?.addEventListener('click', e => {\n  if (e.target.classList.contains('start')) {\n    const id = getParentId(e.target);\n    openDetailsModal(id);\n  }\n});\n\n\nconst favoritesContainer = document.querySelector('.favorites-list');\n\nfavoritesContainer?.addEventListener('click', e => {\n  if (e.target.classList.contains('start')) {\n    const id = getParentId(e.target);\n    openDetailsModal(id); // Same behavior as exercises list\n  }\n});","import initModalRating from \"./form_rating\";\nimport getParentId from \"./unitls/find_parent_id\";\n\nconst container = document.querySelector('.exercises-workout-list');\n\ncontainer?.addEventListener('click', e => {\n  if (e.target.classList.contains('rating')) {\n    const id = getParentId(e.target);\n    initModalRating(id);\n  }\n});\n"],"names":["objectToQueryString","params","filteredParams","_","value","createRestClient","baseDomain","handleError","url","method","query","body","resolve","reject","queryString","fetchResult","data","makeRequest","get","config","post","put","patch","del","api","sendStateChanges","branch","localStorageKey","getLocalFavorites","favorites","error","setLocalFavorites","list","uniqueList","item","id","localFavorites","getFilters","group","page","limit","getQuoteOfDay","getExercises","addExerciseRating","getExerciseById","subscribe","email","addToFavorites","removeFromFavorites","isFavorite","client","GROUPS","MAP_GROUPS_TO_QUERY_PARAMS","ExercisesConstants","FlatStateManager","initialState","__privateAdd","_state","_subscribers","__privateSet","event","key","__privateGet","callback","HashtagManager","hash","IziToastSettings","Messages","message","iziToast","renderCardWorkout","asFavorite","newElement","renderExercisesList","selectedFilter","element","renderFavoritesList","wrapper","favoritesList","emptyMessage","listItem","renderCardFilter","filter","image","template","backgroundTemplate","pageSize","renderFilterList","filterList","idx","imgURL","name","emptyCount","i","_a","renderPaginationButtons","currentPage","totalPages","paginationContainer","pageButtonsContainer","button","getParentId","hashtagManager","store","mapActions","showFavorites","state","favoritesContent","main","exercisesGroupsFilter","filtersGetDataKey","perPage","filtersUpdating","updateFilters","selectedGroup","currentKey","exist","response","results","filters","filtersPerPage","filtersPage","exercisesFiltersList","exerciseGetDataKey","exercisesUpdating","updateExercises","exercises","exercisesPerPage","exercisesPage","updatePaginationButtons","burgerBtn","mobileMenu","closeBtn","socialLinks","homeBtn","favoritesBtn","homeMobileBtn","favoritesMobileBtn","setActiveNav","activeBtn","inactiveBtn","detectPage","handleNavClick","isFavorites","content","e","updateSocialLinksVisibility","icon","form","emailInput","subscribeBtn","handleEmailValidation","isValidEmail","emailValue","isValid","initModalRating","modal","modalForm","modalCloseBtn","ratingValue","ratingStars","selectedRating","rect","percent","highlightStars","rating","star","index","exerciseID","commentInput","review","rate","toggleFavorite","capitalizeFirstLetter","string","openDetailsModal","_b","_c","infoElements","infoData","el","closeDetailsModal","arrStar","container","favoritesContainer"],"mappings":"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"}