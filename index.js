var C=t=>{throw TypeError(t)};var P=(t,e,s)=>e.has(t)||C("Cannot "+s);var c=(t,e,s)=>(P(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),O=(t,e,s,n)=>(P(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);import{i as S}from"./assets/vendor-DVYrn7a6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const F=t=>{if(!t||typeof t!="object")return"";const e=Object.fromEntries(Object.entries(t).filter(([n,r])=>r!==void 0));return Object.keys(e).length===0?"":"?"+new URLSearchParams(e).toString()},$=(t,e)=>(s,{method:n="GET",query:r,body:o})=>new Promise(async(a,i)=>{const q=F(r),l=await fetch(`${t}${s}${q}`,{method:n,body:JSON.stringify(o),headers:{"Content-Type":"application/json"}});if(l.status>=500){i({status:l.status,data:null,error:l.statusText||"Unknown error",isError:!0});return}let p=null;try{p=await l.json()}catch{i({status:500,data:null,error:"Parse error",isError:!0})}if(l.status>=400){i({status:l.status,data:p,error:l.statusText||"Unknown error",isError:!0});return}a({status:l.status,data:p,error:null,isError:!1})}),m=$("https://your-energy.b.goit.study/api"),M=async(t,e)=>await m(t,{...e,method:"GET",body:void 0}),k=async(t,e)=>await m(t,{...e,method:"POST"}),N=async(t,e)=>await m(t,{...e,method:"PUT"}),R=async(t,e)=>await m(t,{...e,method:"PATCH"}),V=async(t,e)=>await m(t,{...e,method:"DELETE"}),g={get:M,post:k,put:N,patch:R,del:V},U=async(t,e=1,s=12)=>g.get("/filters",{query:{filter:t,page:e,limit:s}}),j=async()=>g.get("/quote"),H=async(t={})=>g.get("/exercises",{query:{bodypart:t.bodypart,muscles:t.muscles,equipment:t.equipment,keyword:t.keyword,page:t.page||1,limit:t.limit||10}}),K=async(t,e)=>g.patch(`/exercises/${t}/rating`,{body:{rate:e.rate,email:e.email,review:e.review}}),Q=async t=>g.get(`/exercises/${t}`),_=async t=>g.post("/subscription",{body:{email:t}}),T={getFilters:U,getQuoteOfDay:j,getExercises:H,addExerciseRating:K,getExerciseById:Q,subscribe:_};var u,d;class z{constructor(e={}){v(this,u,{});v(this,d,{});O(this,u,{...e})}getState(e){return c(this,u)[e]}setState(e,s){c(this,u)[e]!==s&&(c(this,u)[e]=s,this.notify(e))}subscribe(e,s){c(this,d)[e]||(c(this,d)[e]=[]),c(this,d)[e].push(s),s(c(this,u)[e],c(this,u))}notify(e){if(c(this,d)[e])for(const s of c(this,d)[e])s(c(this,u)[e],c(this,u))}}u=new WeakMap,d=new WeakMap;class J{constructor(){this.subscribers=new Map,window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleHashChange(){const e=window.location.hash;this.subscribers.forEach((s,n)=>{s(e)})}subscribe(e,s){return this.subscribers.has(e)||this.subscribers.set(e,s),()=>{this.subscribers.delete(e)}}isActive(e){return window.location.hash===e}}function G(t,{group:e,filter:s,image:n}){const o=document.querySelector("#templates").content.querySelector(".exercises-card-filter");let a=o==null?void 0:o.getAttribute("style");if(a=a.replace("{=$image}",`${n}`),t)t.setAttribute("style",a),t.querySelector("h3").textContent=s,t.querySelector("h3").setAttribute("data-filter",s),t.querySelector("div").textContent=e,t.querySelector("div").setAttribute("data-group",e);else{const i=o.cloneNode(!0);return i.setAttribute("style",a),i.querySelector("h3").textContent=s,i.querySelector("h3").setAttribute("data-filter",s),i.querySelector("div").textContent=e,i.querySelector("div").setAttribute("data-group",e),i}}function W(t){const e=document.querySelector(".exercises-filters");t.forEach((s,n)=>{const{filter:r,imgURL:o,name:a}=s;if(e.children[n])G(e.children[n],{filter:a,image:o,group:r});else{const i=document.createElement("load");i.setAttribute("src","partials/exercises/card-filter.html"),i.setAttribute("group",r.group),i.setAttribute("filter",r.filter),i.setAttribute("image",r.image),e.appendChild(i)}})}const B=new J,f=new z({loading:!1,selectedGroup:"Muscles",filtersPage:1,filtersPerPage:12,filtersTotalPages:null,filters:[],exercises:[],showFavorites:B.isActive("#favorites")});B.subscribe("main",t=>{console.log("Main hash changed:",t);const e={"#favorites":()=>f.setState("showFavorites",!0),"":()=>f.setState("showFavorites",!1)};try{e[t]()}catch{console.error("Not implemented action for hash:",t)}});f.subscribe("showFavorites",(t,e)=>{console.log("Show favorites state changed:",t);const s=document.querySelector("#favorites-content");t?s.classList.remove("hidden"):s.classList.add("hidden")});const h=document.querySelector(".tabs-controls");h.addEventListener("click",t=>{var e;if(t.target.dataset.group){(e=h==null?void 0:h.querySelector(".active"))==null||e.classList.remove("active"),t.target.classList.add("active");const s=t.target.dataset.group;console.log("Selected category:",s),f.setState("selectedGroup",s)}});function L(t,e,s){return`${t}-${e}-${s}`}f.subscribe("selectedGroup",async(t,e)=>{console.log("Selected category changed:",t);const s=L(e.filtersPerPage,e.filtersPage,t);if(e.filters.some(l=>l._key===s)){console.log("Filters already loaded for this group:",t,e.filters),f.setState("filters",[...e.filters]);return}const r=await T.getFilters(t);if(console.log("Filters data:",t,r,e),r.isError){console.error("Error fetching filters:",r.error);return}const{results:o,page:a,perPage:i,totalPages:q}=r.data;f.setState("filters",[...e.filters,...o.map(l=>({...l,_key:L(i,a,t)}))])});f.subscribe("filters",(t,e)=>{const{filtersPerPage:s,filtersPage:n,selectedGroup:r}=e,o=t.filter(a=>a._key===L(s,n,r));console.log("Filters list:",o),W(o)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("burgerBtn"),e=document.getElementById("burgerMenu"),s=document.getElementById("close-mob-menu"),n=document.querySelector(".social-links"),r=()=>{window.innerWidth<=768?n.style.display="none":n.style.display=""};t.addEventListener("click",()=>{e.classList.add("open")}),s.addEventListener("click",()=>{e.classList.remove("open")}),window.addEventListener("click",o=>{!e.contains(o.target)&&!t.contains(o.target)&&e.classList.remove("open")}),r(),window.addEventListener("resize",r)});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".link-home-btn"),e=document.querySelector(".link-favorites-btn");function s(n,r){n.classList.add("nav-btn-active"),n.classList.remove("nav-btn-inactive"),r.classList.add("nav-btn-inactive"),r.classList.remove("nav-btn-active")}t.addEventListener("click",n=>{s(t,e)}),e.addEventListener("click",n=>{s(e,t)})});const x=document.querySelector(".quote-description"),A=document.querySelector(".quote-author");async function X(){const t=new Date().toISOString().split("T")[0],e=JSON.parse(localStorage.getItem("quoteOfTheDay"));if(e&&e.date===t)x.textContent=e.quote.quote,A.textContent=e.quote.author;else{const{data:s,isError:n,error:r}=await g.get("/quote");n||(x.textContent=s.quote,A.textContent=s.author,localStorage.setItem("quoteOfTheDay",JSON.stringify({date:t,quote:s})))}}X();const E={timeout:3e3,close:!1,closeOnClick:!0,icon:null,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"};class w{static success(e){S.success({title:"OK",titleColor:"green",message:e,messageColor:"green",progressBarColor:"green",...E})}static error(e){S.error({title:"Error",titleColor:"red",message:e,messageColor:"red",progressBarColor:"red",...E})}static warning(e){S.warning({title:"Caution",message:e,titleColor:"red",messageColor:"red",progressBarColor:"red",...E})}}const b=document.getElementById("subscribeForm"),y=b.querySelector('input[name="email"]'),I=document.getElementById("subscribeBtn");y.addEventListener("input",Y);b.addEventListener("submit",Z);function D(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function Y(){const t=y.value,e=D(t);y.style.borderColor=e?"green":"red"}async function Z(t){t.preventDefault();const s=new FormData(b).get("email");if(!D(s))return console.error("Invalid email address"),w.error("Invalid email address");I.disabled=!0,T.subscribe(s).then(r=>{b.reset(),y.style.borderColor="",w.success(`${r.data.message}`)}).catch(r=>{var o;return w.error(((o=r==null?void 0:r.data)==null?void 0:o.message)||"Subscription failed")}).finally(()=>{I.disabled=!1})}
//# sourceMappingURL=index.js.map
