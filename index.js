var P=t=>{throw TypeError(t)};var q=(t,e,s)=>e.has(t)||P("Cannot "+s);var c=(t,e,s)=>(q(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?P("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),x=(t,e,s,n)=>(q(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);import{i as E}from"./assets/vendor-DVYrn7a6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const T=t=>{if(!t||typeof t!="object")return"";const e=Object.fromEntries(Object.entries(t).filter(([n,r])=>r!==void 0));return Object.keys(e).length===0?"":"?"+new URLSearchParams(e).toString()},F=(t,e)=>(s,{method:n="GET",query:r,body:i})=>new Promise(async(o,a)=>{const C=T(r),l=await fetch(`${t}${s}${C}`,{method:n,body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});if(l.status>=500){a({status:l.status,data:null,error:l.statusText||"Unknown error",isError:!0});return}let p=null;try{p=await l.json()}catch{a({status:500,data:null,error:"Parse error",isError:!0})}if(l.status>=400){a({status:l.status,data:p,error:l.statusText||"Unknown error",isError:!0});return}o({status:l.status,data:p,error:null,isError:!1})}),m=F("https://your-energy.b.goit.study/api"),$=async(t,e)=>await m(t,{...e,method:"GET",body:void 0}),D=async(t,e)=>await m(t,{...e,method:"POST"}),M=async(t,e)=>await m(t,{...e,method:"PUT"}),k=async(t,e)=>await m(t,{...e,method:"PATCH"}),R=async(t,e)=>await m(t,{...e,method:"DELETE"}),g={get:$,post:D,put:M,patch:k,del:R},V=async(t,e=1,s=12)=>g.get("/filters",{query:{filter:t,page:e,limit:s}}),N=async()=>g.get("/quote"),U=async(t={})=>g.get("/exercises",{query:{bodypart:t.bodypart,muscles:t.muscles,equipment:t.equipment,keyword:t.keyword,page:t.page||1,limit:t.limit||10}}),j=async(t,e)=>g.patch(`/exercises/${t}/rating`,{body:{rate:e.rate,email:e.email,review:e.review}}),H=async t=>g.get(`/exercises/${t}`),K=async t=>g.post("/subscription",{body:{email:t}}),O={getFilters:V,getQuoteOfDay:N,getExercises:U,addExerciseRating:j,getExerciseById:H,subscribe:K};var d,u;class _{constructor(e={}){v(this,d,{});v(this,u,{});x(this,d,{...e})}getState(e){return c(this,d)[e]}setState(e,s){c(this,d)[e]!==s&&(c(this,d)[e]=s,this.notify(e))}subscribe(e,s){c(this,u)[e]||(c(this,u)[e]=[]),c(this,u)[e].push(s),s(c(this,d)[e],c(this,d))}notify(e){if(c(this,u)[e])for(const s of c(this,u)[e])s(c(this,d)[e],c(this,d))}}d=new WeakMap,u=new WeakMap;class z{constructor(){this.subscribers=new Map,window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleHashChange(){const e=window.location.hash;this.subscribers.forEach((s,n)=>{s(e)})}subscribe(e,s){return this.subscribers.has(e)||this.subscribers.set(e,s),()=>{this.subscribers.delete(e)}}isActive(e){return window.location.hash===e}}function Q(t,{group:e,filter:s,image:n}){const i=document.querySelector("#templates").content.querySelector(".exercises-card-filter");let o=i==null?void 0:i.getAttribute("style");if(o=o.replace("{=$image}",`${n}`),t)t.setAttribute("style",o),t.querySelector("h3").textContent=s,t.querySelector("h3").setAttribute("data-filter",s),t.querySelector("div").textContent=e,t.querySelector("div").setAttribute("data-group",e);else{const a=i.cloneNode(!0);return a.setAttribute("style",o),a.querySelector("h3").textContent=s,a.querySelector("h3").setAttribute("data-filter",s),a.querySelector("div").textContent=e,a.querySelector("div").setAttribute("data-group",e),a}}function G(t){const e=document.querySelector(".exercises-filters");t.forEach((s,n)=>{const{filter:r,imgURL:i,name:o}=s;if(e.children[n])Q(e.children[n],{filter:o,image:i,group:r});else{const a=document.createElement("load");a.setAttribute("src","partials/exercises/card-filter.html"),a.setAttribute("group",r.group),a.setAttribute("filter",r.filter),a.setAttribute("image",r.image),e.appendChild(a)}})}const A=new z,f=new _({loading:!1,selectedGroup:"Muscles",filtersPage:1,filtersPerPage:12,filtersTotalPages:null,filters:[],exercises:[],showFavorites:A.isActive("#favorites")});A.subscribe("main",t=>{console.log("Main hash changed:",t);const e={"#favorites":()=>f.setState("showFavorites",!0),"":()=>f.setState("showFavorites",!1)};try{e[t]()}catch{console.error("Not implemented action for hash:",t)}});f.subscribe("showFavorites",(t,e)=>{console.log("Show favorites state changed:",t);const s=document.querySelector("#favorites-content");t?s.classList.remove("hidden"):s.classList.add("hidden")});const h=document.querySelector(".tabs-controls");h.addEventListener("click",t=>{var e;if(t.target.dataset.group){(e=h==null?void 0:h.querySelector(".active"))==null||e.classList.remove("active"),t.target.classList.add("active");const s=t.target.dataset.group;console.log("Selected category:",s),f.setState("selectedGroup",s)}});function S(t,e,s){return`${t}-${e}-${s}`}f.subscribe("selectedGroup",async(t,e)=>{console.log("Selected category changed:",t);const s=S(e.filtersPerPage,e.filtersPage,t);if(e.filters.some(l=>l._key===s)){console.log("Filters already loaded for this group:",t,e.filters),f.setState("filters",[...e.filters]);return}const r=await O.getFilters(t);if(console.log("Filters data:",t,r,e),r.isError){console.error("Error fetching filters:",r.error);return}const{results:i,page:o,perPage:a,totalPages:C}=r.data;f.setState("filters",[...e.filters,...i.map(l=>({...l,_key:S(a,o,t)}))])});f.subscribe("filters",(t,e)=>{const{filtersPerPage:s,filtersPage:n,selectedGroup:r}=e,i=t.filter(o=>o._key===S(s,n,r));console.log("Filters list:",i),G(i)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("burgerBtn"),e=document.getElementById("burgerMenu"),s=document.getElementById("close-mob-menu"),n=document.querySelector(".social-links"),r=()=>{window.innerWidth<=768?n.style.display="none":n.style.display=""};t.addEventListener("click",()=>{e.classList.add("open")}),s.addEventListener("click",()=>{e.classList.remove("open")}),window.addEventListener("click",i=>{!e.contains(i.target)&&!t.contains(i.target)&&e.classList.remove("open")}),r(),window.addEventListener("resize",r)});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".link-home-btn"),e=document.querySelector(".link-favorites-btn"),s=document.getElementById("home-content"),n=document.getElementById("favorites-content");function r(i,o){i.classList.add("nav-btn-active"),i.classList.remove("nav-btn-inactive"),o.classList.add("nav-btn-inactive"),o.classList.remove("nav-btn-active")}t.addEventListener("click",i=>{i.preventDefault(),r(t,e),n.classList.add("hidden"),s.classList.remove("hidden"),window.scrollTo({top:0,behavior:"smooth"})}),e.addEventListener("click",i=>{i.preventDefault(),r(e,t),s.classList.add("hidden"),n.classList.remove("hidden")})});const w={timeout:3e3,close:!1,closeOnClick:!0,icon:null,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"};class L{static success(e){E.success({title:"OK",titleColor:"green",message:e,messageColor:"green",progressBarColor:"green",...w})}static error(e){E.error({title:"Error",titleColor:"red",message:e,messageColor:"red",progressBarColor:"red",...w})}static warning(e){E.warning({title:"Caution",message:e,titleColor:"red",messageColor:"red",progressBarColor:"red",...w})}}const b=document.getElementById("subscribeForm"),y=b.querySelector('input[name="email"]'),B=document.getElementById("subscribeBtn");y.addEventListener("input",J);b.addEventListener("submit",W);function I(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function J(){const t=y.value,e=I(t);y.style.borderColor=e?"green":"red"}async function W(t){t.preventDefault();const s=new FormData(b).get("email");if(!I(s))return console.error("Invalid email address"),L.error("Invalid email address");B.disabled=!0,O.subscribe(s).then(r=>{b.reset(),y.style.borderColor="",L.success(`${r.data.message}`)}).catch(r=>{var i;return L.error(((i=r==null?void 0:r.data)==null?void 0:i.message)||"Subscription failed")}).finally(()=>{B.disabled=!1})}
//# sourceMappingURL=index.js.map
