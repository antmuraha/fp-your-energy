var D=Object.defineProperty;var $=t=>{throw TypeError(t)};var R=(t,e,r)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var q=(t,e,r)=>R(t,typeof e!="symbol"?e+"":e,r),O=(t,e,r)=>e.has(t)||$("Cannot "+r);var c=(t,e,r)=>(O(t,e,"read from private field"),r?r.call(t):e.get(t)),v=(t,e,r)=>e.has(t)?$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),T=(t,e,r,i)=>(O(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);import{i as S}from"./assets/vendor-DVYrn7a6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();class V extends Error{constructor(r,i){super(r);q(this,"status");this.status=i}}class j extends Error{constructor(e){super(e)}}class N extends Error{constructor(e){super(e)}}const A=async t=>{try{return{data:await t(),error:null,isError:!1}}catch(e){return{data:null,error:e,isError:!0}}},H=()=>{const t=a=>(...n)=>{},e=t(),r=t(),i=t(),s=t(),o=t();return{log:e,warn:r,error:i,info:s,table:o}},p=H(),k=t=>{if(!t||typeof t!="object")return"";const e=Object.fromEntries(Object.entries(t).filter(([i,s])=>s!==void 0));return Object.keys(e).length===0?"":"?"+new URLSearchParams(e).toString()},K=(t,e)=>async(r,{method:i="GET",query:s,body:o})=>{var x;const a=k(s),n=await A(()=>fetch(`${t}${r}${a}`,{method:i,body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}));if(n.isError){const u=new N(`Error fetching ${r}${a}`,n.error);return p.error(u.toString()),{data:null,error:u,isError:!0}}if(!n.data.ok){const u=new V(`HTTP ${n.data.status} error in request ${r}${a}`,n.data.status);return p.error(u),(x=e==null?void 0:e[n.data.status])==null||x.call(e,u),{data:null,error:u,isError:!0}}const{data:P,error:m,isError:w}=await A(()=>n.data.json());if(w){const u=new j(`Error parsing JSON in request ${r}${a}`);return p.error(u),{data:null,error:u,isError:w}}return{data:P,error:m,isError:w}},U={400:t=>{},401:t=>{},403:t=>{},404:t=>{console.log("404 error:",t)},500:t=>{}},h=K("https://your-energy.b.goit.study/api",U),_=async(t,e)=>await h(t,{...e,method:"GET",body:void 0}),z=async(t,e)=>await h(t,{...e,method:"POST"}),G=async(t,e)=>await h(t,{...e,method:"PUT"}),J=async(t,e)=>await h(t,{...e,method:"PATCH"}),Q=async(t,e)=>await h(t,{...e,method:"DELETE"}),f={get:_,post:z,put:G,patch:J,del:Q},W=async(t,e=1,r=12)=>f.get("/filters",{query:{filter:t,page:e,limit:r}}),X=async()=>f.get("/quote"),Y=async(t={})=>f.get("/exercises",{query:{bodypart:t.bodypart,muscles:t.muscles,equipment:t.equipment,keyword:t.keyword,page:t.page||1,limit:t.limit||10}}),Z=async(t,e)=>f.patch(`/exercises/${t}/rating`,{body:{rate:e.rate,email:e.email,review:e.review}}),ee=async t=>f.get(`/exercises/${t}`),te=async t=>f.post("/subscription",{body:{email:t}}),B={getFilters:W,getQuoteOfDay:X,getExercises:Y,addExerciseRating:Z,getExerciseById:ee,subscribe:te};var l,d;class re{constructor(e={}){v(this,l,{});v(this,d,{});T(this,l,{...e})}getState(e){return c(this,l)[e]}setState(e,r){c(this,l)[e]!==r&&(c(this,l)[e]=r,this.notify(e))}subscribe(e,r){c(this,d)[e]||(c(this,d)[e]=[]),c(this,d)[e].push(r),r(c(this,l)[e],c(this,l))}notify(e){if(c(this,d)[e])for(const r of c(this,d)[e])r(c(this,l)[e],c(this,l))}}l=new WeakMap,d=new WeakMap;class se{constructor(){this.subscribers=new Map,window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleHashChange(){const e=window.location.hash;this.subscribers.forEach((r,i)=>{r(e)})}subscribe(e,r){return this.subscribers.has(e)||this.subscribers.set(e,r),()=>{this.subscribers.delete(e)}}isActive(e){return window.location.hash===e}}function oe(t,{group:e,filter:r,image:i}){const o=document.querySelector("#templates").content.querySelector(".exercises-card-filter");let a=o==null?void 0:o.getAttribute("style");if(a=a.replace("{=$image}",`${i}`),t)t.setAttribute("style",a),t.querySelector("h3").textContent=r,t.querySelector("h3").setAttribute("data-filter",r),t.querySelector("div").textContent=e,t.querySelector("div").setAttribute("data-group",e);else{const n=o.cloneNode(!0);return n.setAttribute("style",a),n.querySelector("h3").textContent=r,n.querySelector("h3").setAttribute("data-filter",r),n.querySelector("div").textContent=e,n.querySelector("div").setAttribute("data-group",e),n}}function ie(t){const e=document.querySelector(".exercises-filters");t.forEach((r,i)=>{const{filter:s,imgURL:o,name:a}=r;if(e.children[i])oe(e.children[i],{filter:a,image:o,group:s});else{const n=document.createElement("load");n.setAttribute("src","partials/exercises/card-filter.html"),n.setAttribute("group",s.group),n.setAttribute("filter",s.filter),n.setAttribute("image",s.image),e.appendChild(n)}})}const I=new se,g=new re({loading:!1,selectedGroup:"Muscles",filtersPage:1,filtersPerPage:12,filtersTotalPages:null,filters:[],exercises:[],showFavorites:I.isActive("#favorites")});I.subscribe("main",t=>{console.log("Main hash changed:",t);const e={"#favorites":()=>g.setState("showFavorites",!0),"":()=>g.setState("showFavorites",!1)};try{e[t]()}catch{console.error("Not implemented action for hash:",t)}});g.subscribe("showFavorites",(t,e)=>{console.log("Show favorites state changed:",t);const r=document.querySelector("#favorites-content");t?r.classList.remove("hidden"):r.classList.add("hidden")});const ne=document.querySelector(".exercises-groups-filter");ne.addEventListener("click",t=>{if(t.target.dataset.group){const e=t.target.dataset.group;console.log("Selected category:",e),g.setState("selectedGroup",e)}});function C(t,e,r){return`${t}-${e}-${r}`}g.subscribe("selectedGroup",async(t,e)=>{console.log("Selected category changed:",t);const r=C(e.filtersPerPage,e.filtersPage,t);if(e.filters.some(m=>m._key===r)){console.log("Filters already loaded for this group:",t,e.filters),g.setState("filters",[...e.filters]);return}const s=await B.getFilters(t);if(console.log("Filters data:",t,s,e),s.isError){console.error("Error fetching filters:",s.error);return}const{results:o,page:a,perPage:n,totalPages:P}=s.data;g.setState("filters",[...e.filters,...o.map(m=>({...m,_key:C(n,a,t)}))])});g.subscribe("filters",(t,e)=>{const{filtersPerPage:r,filtersPage:i,selectedGroup:s}=e,o=t.filter(a=>a._key===C(r,i,s));console.log("Filters list:",o),ie(o)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("burgerBtn"),e=document.getElementById("burgerMenu"),r=document.getElementById("close-mob-menu"),i=document.querySelector(".social-links"),s=()=>{window.innerWidth<=768?i.style.display="none":i.style.display=""};t.addEventListener("click",()=>{e.classList.add("open")}),r.addEventListener("click",()=>{e.classList.remove("open")}),window.addEventListener("click",o=>{!e.contains(o.target)&&!t.contains(o.target)&&e.classList.remove("open")}),s(),window.addEventListener("resize",s)});const L={timeout:3e3,close:!1,closeOnClick:!0,icon:null,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"};class b{static success(e){S.success({title:"OK",titleColor:"green",message:e,messageColor:"green",progressBarColor:"green",...L})}static error(e){S.error({title:"Error",titleColor:"red",message:e,messageColor:"red",progressBarColor:"red",...L})}static warning(e){S.warning({title:"Caution",message:e,titleColor:"red",messageColor:"red",progressBarColor:"red",...L})}}const y=document.getElementById("subscribeForm"),E=y.querySelector('input[name="email"]'),F=document.getElementById("subscribeBtn");E.addEventListener("input",ae);y.addEventListener("submit",ce);function M(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function ae(){const t=E.value,e=M(t);E.style.borderColor=e?"green":"red"}async function ce(t){t.preventDefault();const r=new FormData(y).get("email");if(!M(r))return console.error("Invalid email address"),b.error("Invalid email address");try{F.disabled=!0;const s=await B.subscribe(r);return s.status>=200&&s.status<300?(y.reset(),E.style.borderColor="",b.success(`${s.data.message}`)):(console.error("Server Error:",s.status,s.statusText),b.error(`Server Error: ${s.status} ${s.statusText}`))}catch(s){return console.error("Error:",s.message),b.error(`Error: ${s.message}`)}finally{F.disabled=!1}}p.log("devLogger test");
//# sourceMappingURL=index.js.map
