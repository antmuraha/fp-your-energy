var M=e=>{throw TypeError(e)};var R=(e,t,s)=>t.has(e)||M("Cannot "+s);var u=(e,t,s)=>(R(e,t,"read from private field"),s?s.call(e):t.get(e)),w=(e,t,s)=>t.has(e)?M("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),_=(e,t,s,i)=>(R(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);import{i as P}from"./assets/vendor-DVYrn7a6.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const Q=e=>{if(!e||typeof e!="object")return"";const t=Object.fromEntries(Object.entries(e).filter(([i,r])=>r!==void 0));return Object.keys(t).length===0?"":"?"+new URLSearchParams(t).toString()},J=(e,t)=>(s,{method:i="GET",query:r,body:n})=>new Promise(async(o,c)=>{const l=Q(r),a=await fetch(`${e}${s}${l}`,{method:i,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});if(a.status>=500){c({status:a.status,data:null,error:a.statusText||"Unknown error",isError:!0});return}let g=null;try{g=await a.json()}catch{c({status:500,data:null,error:"Parse error",isError:!0})}if(a.status>=400){c({status:a.status,data:g,error:a.statusText||"Unknown error",isError:!0});return}o({status:a.status,data:g,error:null,isError:!1})}),b=J("https://your-energy.b.goit.study/api"),z=async(e,t)=>await b(e,{...t,method:"GET",body:void 0}),X=async(e,t)=>await b(e,{...t,method:"POST"}),W=async(e,t)=>await b(e,{...t,method:"PUT"}),Z=async(e,t)=>await b(e,{...t,method:"PATCH"}),ee=async(e,t)=>await b(e,{...t,method:"DELETE"}),y={get:z,post:X,put:W,patch:Z,del:ee},te=async(e,t=1,s=12)=>y.get("/filters",{query:{filter:e,page:t,limit:s}}),se=async()=>y.get("/quote"),re=async(e={})=>y.get("/exercises",{query:{bodypart:e.bodypart,muscles:e.muscles,equipment:e.equipment,keyword:e.keyword,page:e.page||1,limit:e.limit||10}}),ne=async(e,t)=>y.patch(`/exercises/${e}/rating`,{body:{rate:t.rate,email:t.email,review:t.review}}),oe=async e=>y.get(`/exercises/${e}`),ie=async e=>y.post("/subscription",{body:{email:e}}),T={getFilters:te,getQuoteOfDay:se,getExercises:re,addExerciseRating:ne,getExerciseById:oe,subscribe:ie},C={BODY_PARTS:"Body parts",Muscles:"Muscles",Equipment:"Equipment"},ae={[C.BODY_PARTS]:"bodypart",[C.Muscles]:"muscles",[C.Equipment]:"equipment"},ce={MAP_GROUPS_TO_QUERY_PARAMS:ae};var m,h;class le{constructor(t={}){w(this,m,{});w(this,h,{});_(this,m,{...t})}getState(t){return u(this,m)[t]}setState(t,s){u(this,m)[t]!==s&&(u(this,m)[t]=s,this.notify(t))}subscribe(t,s){u(this,h)[t]||(u(this,h)[t]=[]),u(this,h)[t].push(s),s(u(this,m)[t],u(this,m))}notify(t){if(u(this,h)[t])for(const s of u(this,h)[t])s(u(this,m)[t],u(this,m))}}m=new WeakMap,h=new WeakMap;class de{constructor(){this.subscribers=new Map,window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleHashChange(){const t=window.location.hash;this.subscribers.forEach((s,i)=>{s(t)})}subscribe(t,s){return this.subscribers.has(t)||this.subscribers.set(t,s),()=>{this.subscribers.delete(t)}}isActive(t){return window.location.hash===t}}function ue(e,t=!1){const r=document.querySelector("#templates").content.querySelector(".favorites-workout-card").cloneNode(!0);return r.dataset.id=e._id,t?r.querySelector(".rating").classList.add("hidden"):(r.querySelector(".delete").classList.add("hidden"),r.querySelector(".rating").textContent=e.rating),r.querySelector(".title").textContent=e.name,r.querySelector(".burned-calories").textContent=`${e.burnedCalories} / ${e.time} min`,r.querySelector(".group").textContent=e._group,r.querySelector(".group-target").textContent=e.bodyPart,r.querySelector(".filter").textContent=e.target,r}function N(e,t){const s=document.querySelector(".exercises-workout-list");if(!t){s==null||s.classList.add("hidden");return}s==null||s.classList.remove("hidden"),s.innerHTML="",e.forEach(i=>{const r=ue(i);s.appendChild(r)})}function ge(e,{group:t,filter:s,image:i}){const n=document.querySelector("#templates").content.querySelector(".exercises-card-filter");let o=n==null?void 0:n.getAttribute("style");if(o=o.replace("{=$image}",`${i}`),e)e.setAttribute("style",o),e.querySelector("h3").textContent=s,e.querySelector("h3").setAttribute("data-filter",s),e.querySelector("div").textContent=t,e.querySelector("div").setAttribute("data-group",t);else{const c=n.cloneNode(!0);return c.setAttribute("style",o),c.querySelector("h3").textContent=s,c.querySelector("h3").setAttribute("data-filter",s),c.querySelector("div").textContent=t,c.querySelector("div").setAttribute("data-group",t),c}}function U(e,t){const s=document.querySelector(".exercises-filters-list");if(t){s==null||s.classList.add("hidden");return}s==null||s.classList.remove("hidden"),e.forEach((i,r)=>{const{filter:n,imgURL:o,name:c}=i;if(s.children[r])ge(s.children[r],{filter:c,image:o,group:n});else{const l=document.createElement("div");l.setAttribute("src",o),l.setAttribute("group",n.group),l.setAttribute("filter",n.filter),l.setAttribute("image",n.image),s.appendChild(l)}})}const G=new de,d=new le({loading:!1,selectedGroup:"Muscles",selectedFilter:null,filtersPage:1,filtersPerPage:12,filtersTotalPages:null,filters:[],exercises:[],exercisesPage:1,exercisesPerPage:10,exercisesTotalPages:null,showFavorites:G.isActive("#favorites")});G.subscribe("main",e=>{console.log("Main hash changed:",e);const t={"#favorites":()=>d.setState("showFavorites",!0),"":()=>d.setState("showFavorites",!1)};try{t[e]()}catch{console.error("Not implemented action for hash:",e)}});d.subscribe("showFavorites",(e,t)=>{console.log("Show favorites state changed:",e);const s=document.querySelector("#favorites-content");e?s.classList.remove("hidden"):s.classList.add("hidden")});const S=document.querySelector(".tabs-controls");S.addEventListener("click",e=>{var t;if(e.target.dataset.group){(t=S==null?void 0:S.querySelector(".active"))==null||t.classList.remove("active"),e.target.classList.add("active");const s=e.target.dataset.group;console.log("Selected category:",s),d.setState("selectedGroup",s),d.setState("selectedFilter",null)}});function I(e,t,s){return`${e}-${t}-${s}`}d.subscribe("selectedGroup",async(e,t)=>{console.log("Selected category changed:",e);const s=I(t.filtersPerPage,t.filtersPage,e);if(t.filters.some(a=>a._key===s)){console.log("Filters already loaded for this group:",e,t.filters),d.setState("filters",[...t.filters]);return}const r=await T.getFilters(e);if(console.log("Filters data:",e,r,t),r.isError){console.error("Error fetching filters:",r.error);return}const{results:n,page:o,perPage:c,totalPages:l}=r.data;d.setState("filters",[...t.filters,...n.map(a=>({...a,_key:I(c,o,e)}))])});d.subscribe("filters",(e,t)=>{const{filtersPerPage:s,filtersPage:i,selectedGroup:r}=t,n=e.filter(o=>o._key===I(s,i,r));console.log("Filters list:",n),U(n)});d.subscribe("selectedFilter",(e,t)=>{e&&U(null,e)});const L=document.querySelector(".exercises-filters-list");L==null||L.addEventListener("click",e=>{if(e.target.classList.contains("exercises-card-filter")){const t=e.target.querySelector("[data-filter]").dataset.filter;console.log("Selected filter:",t),d.setState("selectedFilter",t)}});function A(e,t,s,i){return`${e}-${t}-${s}-${i}`}d.subscribe("selectedFilter",async(e,t)=>{if(!e){console.log("No filter selected, skipping exercises fetch");return}const s=A(t.exercisesPerPage,t.exercisesPage,t.selectedGroup,e);if(t.exercises.some(o=>o._key===s)){console.log("Exercises already loaded for this filter:",e,t.exercises),d.setState("exercises",[...t.exercises]);return}const n={[ce.MAP_GROUPS_TO_QUERY_PARAMS[t.selectedGroup]]:e,page:t.exercisesPage,limit:t.exercisesPerPage};T.getExercises(n).then(o=>{if(o.isError){console.error("Error fetching exercises:",o.error);return}const{results:c,page:l,perPage:a,totalPages:g}=o.data;console.log("Exercises data:",o.data),d.setState("exercises",[...t.exercises,...c.map(f=>({...f,_group:t.selectedGroup,_key:A(a,l,t.selectedGroup,e)}))]),d.setState("exercisesPage",l),d.setState("exercisesPerPage",a),d.setState("exercisesTotalPages",g)})});d.subscribe("exercises",(e,t)=>{const{exercisesPerPage:s,exercisesPage:i,selectedGroup:r,selectedFilter:n}=t,o=e.filter(c=>c._key===A(s,i,r,n));console.log("Exercises list:",{exercises:e,list:o}),N(o,n)});d.subscribe("selectedFilter",(e,t)=>{e||N(!1,e)});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("burgerBtn"),t=document.getElementById("burgerMenu"),s=document.getElementById("close-mob-menu"),i=document.querySelector(".social-links"),r=()=>{window.innerWidth<=768?i.style.display="none":i.style.display=""};e.addEventListener("click",()=>{t.classList.add("open")}),s.addEventListener("click",()=>{t.classList.remove("open")}),window.addEventListener("click",n=>{!t.contains(n.target)&&!e.contains(n.target)&&t.classList.remove("open")}),r(),window.addEventListener("resize",r)});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".link-home-btn"),t=document.querySelector(".link-favorites-btn");function s(i,r){i.classList.add("nav-btn-active"),i.classList.remove("nav-btn-inactive"),r.classList.add("nav-btn-inactive"),r.classList.remove("nav-btn-active")}e.addEventListener("click",i=>{s(e,t)}),t.addEventListener("click",i=>{s(t,e)})});const $=document.querySelector(".quote-description"),D=document.querySelector(".quote-author");async function fe(){const e=new Date().toISOString().split("T")[0],t=JSON.parse(localStorage.getItem("quoteOfTheDay"));if(t&&t.date===e)$.textContent=t.quote.quote,D.textContent=t.quote.author;else{const{data:s,isError:i,error:r}=await y.get("/quote");i||($.textContent=s.quote,D.textContent=s.author,localStorage.setItem("quoteOfTheDay",JSON.stringify({date:e,quote:s})))}}fe();const q={timeout:3e3,close:!1,closeOnClick:!0,icon:null,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"};class k{static success(t){P.success({title:"OK",titleColor:"green",message:t,messageColor:"green",progressBarColor:"green",...q})}static error(t){P.error({title:"Error",titleColor:"red",message:t,messageColor:"red",progressBarColor:"red",...q})}static warning(t){P.warning({title:"Caution",message:t,titleColor:"red",messageColor:"red",progressBarColor:"red",...q})}}const v=document.getElementById("subscribeForm"),E=v.querySelector('input[name="email"]'),F=document.getElementById("subscribeBtn");E.addEventListener("input",me);v.addEventListener("submit",he);function V(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function me(){const e=E.value,t=V(e);E.style.borderColor=t?"green":"red"}async function he(e){e.preventDefault();const s=new FormData(v).get("email");if(!V(s))return console.error("Invalid email address"),k.error("Invalid email address");F.disabled=!0,T.subscribe(s).then(r=>{v.reset(),E.style.borderColor="",k.success(`${r.data.message}`)}).catch(r=>{var n;return k.error(((n=r==null?void 0:r.data)==null?void 0:n.message)||"Subscription failed")}).finally(()=>{F.disabled=!1})}function ye(e){alert("Click Rating on workout card with id: "+e);const t=document.getElementById("modal-rating");t.style.display="block";const s=document.getElementById("subscribe-details-form"),i=document.getElementById("modal-close"),r=document.getElementById("rating-value"),n=document.getElementById("rating-stars");let o=0;n==null||n.addEventListener("click",l=>{const a=n.getBoundingClientRect(),f=(l.clientX-a.left)/a.width;o=Math.round(f*5),r.textContent=o.toFixed(1),c(o)}),n&&r&&(n.addEventListener("mousemove",l=>{const a=n.getBoundingClientRect(),f=(l.clientX-a.left)/a.width,x=Math.round(f*5*10)/10;r.textContent=x.toFixed(1),c(x)}),n.addEventListener("mouseleave",()=>{r.textContent=o.toFixed(1),c(o)}),n.addEventListener("click",l=>{const a=n.getBoundingClientRect(),f=(l.clientX-a.left)/a.width;o=Math.round(f*5*10)/10,r.textContent=o.toFixed(1),c(o)}));function c(l){const a=n.textContent.split("").map((g,f)=>f<Math.round(l)?"★":"☆");n.textContent=a.join("")}i.addEventListener("click",()=>{t.style.display="none",o=0,r.textContent="0.0",c(0)}),s.addEventListener("submit",async l=>{l.preventDefault();const a="64f389465ae26083f39b17a2",g=s.elements.email,f=s.elements.comment,x=g.value.trim(),Y=f.value.trim(),H=o;if(!g.checkValidity()){alert("Please enter a valid email address.");return}try{const p=await fetch(`https://your-energy.b.goit.study/api/exercises/${a}/rating`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rate:H,email:x,review:Y})});if(p.status===409){alert("You have already submitted a review for this exercise.");return}else if(p.ok)alert("Your feedback has been submitted!");else{const K=await p.json();alert(`Error ${p.status}: ${K.message||"Unknown error"}`);return}alert("Your feedback has been submitted!"),s.reset(),t.style.display="none"}catch{alert("Something went wrong. Please try again later.")}})}function j(e){if(!e)return null;for(;e&&!e.dataset.id;)e=e.parentElement;return e?e.dataset.id:null}const O=document.querySelector(".exercises-workout-list");O==null||O.addEventListener("click",e=>{if(e.target.classList.contains("start")){const t=j(e.target);alert("Click Start on workout card with ID: "+t)}});const B=document.querySelector(".exercises-workout-list");B==null||B.addEventListener("click",e=>{if(e.target.classList.contains("rating")){const t=j(e.target);ye(t)}});
//# sourceMappingURL=index.js.map
