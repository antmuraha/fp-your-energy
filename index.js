var M=t=>{throw TypeError(t)};var T=(t,e,s)=>e.has(t)||M("Cannot "+s);var m=(t,e,s)=>(T(t,e,"read from private field"),s?s.call(t):e.get(t)),q=(t,e,s)=>e.has(t)?M("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),k=(t,e,s,o)=>(T(t,e,"write to private field"),o?o.call(t,s):e.set(t,s),s);import{i as B}from"./assets/vendor-DVYrn7a6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const U=t=>{if(!t||typeof t!="object")return"";const e=Object.fromEntries(Object.entries(t).filter(([o,r])=>r!==void 0));return Object.keys(e).length===0?"":"?"+new URLSearchParams(e).toString()},_=(t,e)=>(s,{method:o="GET",query:r,body:n})=>new Promise(async(c,i)=>{const l=U(r),a=await fetch(`${t}${s}${l}`,{method:o,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});if(a.status>=500){i({status:a.status,data:null,error:a.statusText||"Unknown error",isError:!0});return}let g=null;try{g=await a.json()}catch{i({status:500,data:null,error:"Parse error",isError:!0})}if(a.status>=400){i({status:a.status,data:g,error:a.statusText||"Unknown error",isError:!0});return}c({status:a.status,data:g,error:null,isError:!1})}),w=_("https://your-energy.b.goit.study/api"),J=async(t,e)=>await w(t,{...e,method:"GET",body:void 0}),K=async(t,e)=>await w(t,{...e,method:"POST"}),Q=async(t,e)=>await w(t,{...e,method:"PUT"}),z=async(t,e)=>await w(t,{...e,method:"PATCH"}),X=async(t,e)=>await w(t,{...e,method:"DELETE"}),p={get:J,post:K,put:Q,patch:z,del:X},Y=async(t,e=1,s=12)=>p.get("/filters",{query:{filter:t,page:e,limit:s}}),G=async()=>p.get("/quote"),W=async(t={})=>p.get("/exercises",{query:{bodypart:t.bodypart,muscles:t.muscles,equipment:t.equipment,keyword:t.keyword,page:t.page||1,limit:t.limit||10}}),Z=async(t,e)=>p.patch(`/exercises/${t}/rating`,{body:{rate:e.rate,email:e.email,review:e.review}}),ee=async t=>p.get(`/exercises/${t}`),te=async t=>p.post("/subscription",{body:{email:t}}),$={getFilters:Y,getQuoteOfDay:G,getExercises:W,addExerciseRating:Z,getExerciseById:ee,subscribe:te};var f,y;class se{constructor(e={}){q(this,f,{});q(this,y,{});k(this,f,{...e})}getState(e){return m(this,f)[e]}setState(e,s){m(this,f)[e]!==s&&(m(this,f)[e]=s,this.notify(e))}subscribe(e,s){m(this,y)[e]||(m(this,y)[e]=[]),m(this,y)[e].push(s),s(m(this,f)[e],m(this,f))}notify(e){if(m(this,y)[e])for(const s of m(this,y)[e])s(m(this,f)[e],m(this,f))}}f=new WeakMap,y=new WeakMap;class re{constructor(){this.subscribers=new Map,window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleHashChange(){const e=window.location.hash;this.subscribers.forEach((s,o)=>{s(e)})}subscribe(e,s){return this.subscribers.has(e)||this.subscribers.set(e,s),()=>{this.subscribers.delete(e)}}isActive(e){return window.location.hash===e}}function ne(t,{group:e,filter:s,image:o}){const n=document.querySelector("#templates").content.querySelector(".exercises-card-filter");let c=n==null?void 0:n.getAttribute("style");if(c=c.replace("{=$image}",`${o}`),t)t.setAttribute("style",c),t.querySelector("h3").textContent=s,t.querySelector("h3").setAttribute("data-filter",s),t.querySelector("div").textContent=e,t.querySelector("div").setAttribute("data-group",e);else{const i=n.cloneNode(!0);return i.setAttribute("style",c),i.querySelector("h3").textContent=s,i.querySelector("h3").setAttribute("data-filter",s),i.querySelector("div").textContent=e,i.querySelector("div").setAttribute("data-group",e),i}}function oe(t){const e=document.querySelector(".exercises-filters");t.forEach((s,o)=>{const{filter:r,imgURL:n,name:c}=s;if(e.children[o])ne(e.children[o],{filter:c,image:n,group:r});else{const i=document.createElement("load");i.setAttribute("src","partials/exercises/card-filter.html"),i.setAttribute("group",r.group),i.setAttribute("filter",r.filter),i.setAttribute("image",r.image),e.appendChild(i)}})}const R=new re,b=new se({loading:!1,selectedGroup:"Muscles",filtersPage:1,filtersPerPage:12,filtersTotalPages:null,filters:[],exercises:[],showFavorites:R.isActive("#favorites")});R.subscribe("main",t=>{console.log("Main hash changed:",t);const e={"#favorites":()=>b.setState("showFavorites",!0),"":()=>b.setState("showFavorites",!1)};try{e[t]()}catch{console.error("Not implemented action for hash:",t)}});b.subscribe("showFavorites",(t,e)=>{console.log("Show favorites state changed:",t);const s=document.querySelector("#favorites-content");t?s.classList.remove("hidden"):s.classList.add("hidden")});const L=document.querySelector(".tabs-controls");L.addEventListener("click",t=>{var e;if(t.target.dataset.group){(e=L==null?void 0:L.querySelector(".active"))==null||e.classList.remove("active"),t.target.classList.add("active");const s=t.target.dataset.group;console.log("Selected category:",s),b.setState("selectedGroup",s)}});function O(t,e,s){return`${t}-${e}-${s}`}b.subscribe("selectedGroup",async(t,e)=>{console.log("Selected category changed:",t);const s=O(e.filtersPerPage,e.filtersPage,t);if(e.filters.some(a=>a._key===s)){console.log("Filters already loaded for this group:",t,e.filters),b.setState("filters",[...e.filters]);return}const r=await $.getFilters(t);if(console.log("Filters data:",t,r,e),r.isError){console.error("Error fetching filters:",r.error);return}const{results:n,page:c,perPage:i,totalPages:l}=r.data;b.setState("filters",[...e.filters,...n.map(a=>({...a,_key:O(i,c,t)}))])});b.subscribe("filters",(t,e)=>{const{filtersPerPage:s,filtersPage:o,selectedGroup:r}=e,n=t.filter(c=>c._key===O(s,o,r));console.log("Filters list:",n),oe(n)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("burgerBtn"),e=document.getElementById("burgerMenu"),s=document.getElementById("close-mob-menu"),o=document.querySelector(".social-links"),r=()=>{window.innerWidth<=768?o.style.display="none":o.style.display=""};t.addEventListener("click",()=>{e.classList.add("open")}),s.addEventListener("click",()=>{e.classList.remove("open")}),window.addEventListener("click",n=>{!e.contains(n.target)&&!t.contains(n.target)&&e.classList.remove("open")}),r(),window.addEventListener("resize",r)});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".link-home-btn"),e=document.querySelector(".link-favorites-btn");function s(o,r){o.classList.add("nav-btn-active"),o.classList.remove("nav-btn-inactive"),r.classList.add("nav-btn-inactive"),r.classList.remove("nav-btn-active")}t.addEventListener("click",o=>{s(t,e)}),e.addEventListener("click",o=>{s(e,t)})});const F=document.querySelector(".quote-description"),A=document.querySelector(".quote-author");async function ie(){const t=new Date().toISOString().split("T")[0],e=JSON.parse(localStorage.getItem("quoteOfTheDay"));if(e&&e.date===t)F.textContent=e.quote.quote,A.textContent=e.quote.author;else{const{data:s,isError:o,error:r}=await p.get("/quote");o||(F.textContent=s.quote,A.textContent=s.author,localStorage.setItem("quoteOfTheDay",JSON.stringify({date:t,quote:s})))}}ie();const I={timeout:3e3,close:!1,closeOnClick:!0,icon:null,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"};class P{static success(e){B.success({title:"OK",titleColor:"green",message:e,messageColor:"green",progressBarColor:"green",...I})}static error(e){B.error({title:"Error",titleColor:"red",message:e,messageColor:"red",progressBarColor:"red",...I})}static warning(e){B.warning({title:"Caution",message:e,titleColor:"red",messageColor:"red",progressBarColor:"red",...I})}}const C=document.getElementById("subscribeForm"),x=C.querySelector('input[name="email"]'),D=document.getElementById("subscribeBtn");x.addEventListener("input",ae);C.addEventListener("submit",ce);function N(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function ae(){const t=x.value,e=N(t);x.style.borderColor=e?"green":"red"}async function ce(t){t.preventDefault();const s=new FormData(C).get("email");if(!N(s))return console.error("Invalid email address"),P.error("Invalid email address");D.disabled=!0,$.subscribe(s).then(r=>{C.reset(),x.style.borderColor="",P.success(`${r.data.message}`)}).catch(r=>{var n;return P.error(((n=r==null?void 0:r.data)==null?void 0:n.message)||"Subscription failed")}).finally(()=>{D.disabled=!1})}document.addEventListener("DOMContentLoaded",async()=>{const t=document.createElement("div");document.body.appendChild(t);try{const d=await fetch("./partials/footer-subscription-form.html");if(!d.ok)throw new Error("Failed to load modal HTML");const u=await d.text();t.innerHTML=u}catch(d){console.error("Error loading modal:",d);return}const e=document.querySelector(".subscribe-input"),s=document.querySelector(".subscribe-btn"),o=document.getElementById("subscribe-modal"),r=document.getElementById("subscribe-details-form"),n=document.getElementById("modal-close"),c=document.getElementById("open-modal-btn");if(c&&c.addEventListener("click",()=>{o.style.display="flex"}),!e||!s||!o||!r||!n){console.error("Modal or button elements not found");return}document.getElementById("modal-email");const i=document.getElementById("rating-value"),l=document.getElementById("rating-stars");let a=0;l==null||l.addEventListener("click",d=>{const u=l.getBoundingClientRect(),h=(d.clientX-u.left)/u.width;a=Math.round(h*5),i.textContent=a.toFixed(1),g(a)}),l&&i&&(l.addEventListener("mousemove",d=>{const u=l.getBoundingClientRect(),h=(d.clientX-u.left)/u.width,S=Math.round(h*5*10)/10;i.textContent=S.toFixed(1),g(S)}),l.addEventListener("mouseleave",()=>{i.textContent=a.toFixed(1),g(a)}),l.addEventListener("click",d=>{const u=l.getBoundingClientRect(),h=(d.clientX-u.left)/u.width;a=Math.round(h*5*10)/10,i.textContent=a.toFixed(1),g(a)}));function g(d){const u=l.textContent.split("").map((v,h)=>h<Math.round(d)?"★":"☆");l.textContent=u.join("")}n.addEventListener("click",()=>{o.style.display="none",a=0,i.textContent="0.0",g(0)}),r.addEventListener("submit",async d=>{d.preventDefault();const u="64f389465ae26083f39b17a2",v=r.elements.email,h=r.elements.comment,S=v.value.trim(),V=h.value.trim(),j=a;if(!v.checkValidity()){alert("Please enter a valid email address.");return}try{const E=await fetch(`https://your-energy.b.goit.study/api/exercises/${u}/rating`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rate:j,email:S,review:V})});if(E.status===409){alert("You have already submitted a review for this exercise.");return}else if(E.ok)alert("Your feedback has been submitted!");else{const H=await E.json();alert(`Error ${E.status}: ${H.message||"Unknown error"}`);return}alert("Your feedback has been submitted!"),r.reset(),o.style.display="none"}catch{alert("Something went wrong. Please try again later.")}})});
//# sourceMappingURL=index.js.map
