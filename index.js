var R=Object.defineProperty;var q=t=>{throw TypeError(t)};var V=(t,e,r)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var O=(t,e,r)=>V(t,typeof e!="symbol"?e+"":e,r),T=(t,e,r)=>e.has(t)||q("Cannot "+r);var c=(t,e,r)=>(T(t,e,"read from private field"),r?r.call(t):e.get(t)),S=(t,e,r)=>e.has(t)?q("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),A=(t,e,r,n)=>(T(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import{i as L}from"./assets/vendor-DVYrn7a6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();class j extends Error{constructor(r,n){super(r);O(this,"status");this.status=n}}class N extends Error{constructor(e){super(e)}}class H extends Error{constructor(e){super(e)}}const B=async t=>{try{return{data:await t(),error:null,isError:!1}}catch(e){return{data:null,error:e,isError:!0}}},k=()=>{const t=a=>(...i)=>{},e=t(),r=t(),n=t(),s=t(),o=t();return{log:e,warn:r,error:n,info:s,table:o}},p=k(),K=t=>{if(!t||typeof t!="object")return"";const e=Object.fromEntries(Object.entries(t).filter(([n,s])=>s!==void 0));return Object.keys(e).length===0?"":"?"+new URLSearchParams(e).toString()},U=(t,e)=>async(r,{method:n="GET",query:s,body:o})=>{var x;const a=K(s),i=await B(()=>fetch(`${t}${r}${a}`,{method:n,body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}));if(i.isError){const u=new H(`Error fetching ${r}${a}`,i.error);return p.error(u.toString()),{data:null,error:u,isError:!0}}if(!i.data.ok){const u=new j(`HTTP ${i.data.status} error in request ${r}${a}`,i.data.status);return p.error(u),(x=e==null?void 0:e[i.data.status])==null||x.call(e,u),{data:null,error:u,isError:!0}}const{data:$,error:m,isError:v}=await B(()=>i.data.json());if(v){const u=new N(`Error parsing JSON in request ${r}${a}`);return p.error(u),{data:null,error:u,isError:v}}return{data:$,error:m,isError:v}},_={400:t=>{},401:t=>{},403:t=>{},404:t=>{console.log("404 error:",t)},500:t=>{}},h=U("https://your-energy.b.goit.study/api",_),z=async(t,e)=>await h(t,{...e,method:"GET",body:void 0}),J=async(t,e)=>await h(t,{...e,method:"POST"}),Q=async(t,e)=>await h(t,{...e,method:"PUT"}),G=async(t,e)=>await h(t,{...e,method:"PATCH"}),W=async(t,e)=>await h(t,{...e,method:"DELETE"}),f={get:z,post:J,put:Q,patch:G,del:W},X=async(t,e=1,r=12)=>f.get("/filters",{query:{filter:t,page:e,limit:r}}),Y=async()=>f.get("/quote"),Z=async(t={})=>f.get("/exercises",{query:{bodypart:t.bodypart,muscles:t.muscles,equipment:t.equipment,keyword:t.keyword,page:t.page||1,limit:t.limit||10}}),ee=async(t,e)=>f.patch(`/exercises/${t}/rating`,{body:{rate:e.rate,email:e.email,review:e.review}}),te=async t=>f.get(`/exercises/${t}`),re=async t=>f.post("/subscription",{body:{email:t}}),I={getFilters:X,getQuoteOfDay:Y,getExercises:Z,addExerciseRating:ee,getExerciseById:te,subscribe:re};var l,d;class se{constructor(e={}){S(this,l,{});S(this,d,{});A(this,l,{...e})}getState(e){return c(this,l)[e]}setState(e,r){c(this,l)[e]!==r&&(c(this,l)[e]=r,this.notify(e))}subscribe(e,r){c(this,d)[e]||(c(this,d)[e]=[]),c(this,d)[e].push(r),r(c(this,l)[e],c(this,l))}notify(e){if(c(this,d)[e])for(const r of c(this,d)[e])r(c(this,l)[e],c(this,l))}}l=new WeakMap,d=new WeakMap;class oe{constructor(){this.subscribers=new Map,window.addEventListener("hashchange",this.handleHashChange.bind(this))}handleHashChange(){const e=window.location.hash;this.subscribers.forEach((r,n)=>{r(e)})}subscribe(e,r){return this.subscribers.has(e)||this.subscribers.set(e,r),()=>{this.subscribers.delete(e)}}isActive(e){return window.location.hash===e}}function ne(t,{group:e,filter:r,image:n}){const o=document.querySelector("#templates").content.querySelector(".exercises-card-filter");let a=o==null?void 0:o.getAttribute("style");if(a=a.replace("{=$image}",`${n}`),t)t.setAttribute("style",a),t.querySelector("h3").textContent=r,t.querySelector("h3").setAttribute("data-filter",r),t.querySelector("div").textContent=e,t.querySelector("div").setAttribute("data-group",e);else{const i=o.cloneNode(!0);return i.setAttribute("style",a),i.querySelector("h3").textContent=r,i.querySelector("h3").setAttribute("data-filter",r),i.querySelector("div").textContent=e,i.querySelector("div").setAttribute("data-group",e),i}}function ie(t){const e=document.querySelector(".exercises-filters");t.forEach((r,n)=>{const{filter:s,imgURL:o,name:a}=r;if(e.children[n])ne(e.children[n],{filter:a,image:o,group:s});else{const i=document.createElement("load");i.setAttribute("src","partials/exercises/card-filter.html"),i.setAttribute("group",s.group),i.setAttribute("filter",s.filter),i.setAttribute("image",s.image),e.appendChild(i)}})}const M=new oe,g=new se({loading:!1,selectedGroup:"Muscles",filtersPage:1,filtersPerPage:12,filtersTotalPages:null,filters:[],exercises:[],showFavorites:M.isActive("#favorites")});M.subscribe("main",t=>{console.log("Main hash changed:",t);const e={"#favorites":()=>g.setState("showFavorites",!0),"":()=>g.setState("showFavorites",!1)};try{e[t]()}catch{console.error("Not implemented action for hash:",t)}});g.subscribe("showFavorites",(t,e)=>{console.log("Show favorites state changed:",t);const r=document.querySelector("#favorites-content");t?r.classList.remove("hidden"):r.classList.add("hidden")});const b=document.querySelector(".tabs-controls");b.addEventListener("click",t=>{var e;if(t.target.dataset.group){(e=b==null?void 0:b.querySelector(".active"))==null||e.classList.remove("active"),t.target.classList.add("active");const r=t.target.dataset.group;console.log("Selected category:",r),g.setState("selectedGroup",r)}});function P(t,e,r){return`${t}-${e}-${r}`}g.subscribe("selectedGroup",async(t,e)=>{console.log("Selected category changed:",t);const r=P(e.filtersPerPage,e.filtersPage,t);if(e.filters.some(m=>m._key===r)){console.log("Filters already loaded for this group:",t,e.filters),g.setState("filters",[...e.filters]);return}const s=await I.getFilters(t);if(console.log("Filters data:",t,s,e),s.isError){console.error("Error fetching filters:",s.error);return}const{results:o,page:a,perPage:i,totalPages:$}=s.data;g.setState("filters",[...e.filters,...o.map(m=>({...m,_key:P(i,a,t)}))])});g.subscribe("filters",(t,e)=>{const{filtersPerPage:r,filtersPage:n,selectedGroup:s}=e,o=t.filter(a=>a._key===P(r,n,s));console.log("Filters list:",o),ie(o)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("burgerBtn"),e=document.getElementById("burgerMenu"),r=document.getElementById("close-mob-menu"),n=document.querySelector(".social-links"),s=()=>{window.innerWidth<=768?n.style.display="none":n.style.display=""};t.addEventListener("click",()=>{e.classList.add("open")}),r.addEventListener("click",()=>{e.classList.remove("open")}),window.addEventListener("click",o=>{!e.contains(o.target)&&!t.contains(o.target)&&e.classList.remove("open")}),s(),window.addEventListener("resize",s)});const C={timeout:3e3,close:!1,closeOnClick:!0,icon:null,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"};class y{static success(e){L.success({title:"OK",titleColor:"green",message:e,messageColor:"green",progressBarColor:"green",...C})}static error(e){L.error({title:"Error",titleColor:"red",message:e,messageColor:"red",progressBarColor:"red",...C})}static warning(e){L.warning({title:"Caution",message:e,titleColor:"red",messageColor:"red",progressBarColor:"red",...C})}}const E=document.getElementById("subscribeForm"),w=E.querySelector('input[name="email"]'),F=document.getElementById("subscribeBtn");w.addEventListener("input",ae);E.addEventListener("submit",ce);function D(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function ae(){const t=w.value,e=D(t);w.style.borderColor=e?"green":"red"}async function ce(t){t.preventDefault();const r=new FormData(E).get("email");if(!D(r))return console.error("Invalid email address"),y.error("Invalid email address");try{F.disabled=!0;const s=await I.subscribe(r);return s.status>=200&&s.status<300?(E.reset(),w.style.borderColor="",y.success(`${s.data.message}`)):(console.error("Server Error:",s.status,s.statusText),y.error(`Server Error: ${s.status} ${s.statusText}`))}catch(s){return console.error("Error:",s.message),y.error(`Error: ${s.message}`)}finally{F.disabled=!1}}p.log("devLogger test");
//# sourceMappingURL=index.js.map
